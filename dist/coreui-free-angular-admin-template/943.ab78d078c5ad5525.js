"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[943],{5943:(yt,J,u)=>{u.r(J),u.d(J,{MvtStockModule:()=>Et});var m=u(6814),a=u(9969),A=u(1272),d=u(461),c=u(95),q=u(6472),e=u(9212),_=u(2098),T=u(6549),I=u(3519),p=u.n(I);let O=(()=>{class o{constructor(t){this.activeModal=t}save(){this.activeModal.close(this.format)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirme-print-etat"]],decls:26,vars:4,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"text-center"],["md","12"],["cLabel","","for","field_adresse"],["aria-label","Small select example","cSelect","","sizing","sm","name","format","id","field_format",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],["cButton","","color","warning","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Impression"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"h5",8),e._uU(11),e.qZA(),e.TgZ(12,"c-row")(13,"c-col",9)(14,"label",10),e._uU(15,"Selectionner le format de l'\xe9tat :"),e.qZA(),e.TgZ(16,"select",11),e.NdJ("ngModelChange",function(l){return i.format=l}),e.TgZ(17,"option",12),e._uU(18,"PDF"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"Word"),e.qZA()()()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return i.save()}),e._uU(23,"Imprimer"),e.qZA(),e.TgZ(24,"button",16),e.NdJ("click",function(){return i.close()}),e._uU(25,"Annuler"),e.qZA()()()()),2&n&&(e.xp6(11),e.hij("Etes-vous s\xfbr de vouloir imprimer ",i.confirmeMsg," ?"),e.xp6(5),e.Q6J("ngModel",i.format),e.xp6(1),e.Q6J("ngValue","pdf"),e.xp6(2),e.Q6J("ngValue","word"))},dependencies:[a.Hq3,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.On,c.F],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#538136}"]})}return o})();var C=u(2547),h=u(2051),S=u(3779);const B=()=>["/mouvement/entree/nouvelle"];function D(o,s){1&o&&(e.TgZ(0,"c-col",5)(1,"button",6),e._uU(2,"Ajouter"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,B)))}function Q(o,s){1&o&&(e.TgZ(0,"th",9),e._uU(1,"Action"),e.qZA())}function Y(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",15),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function j(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",16),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function z(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",17),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.editItem(i))}),e.O4$(),e._UZ(2,"svg",19),e.qZA(),e.kcU(),e.TgZ(3,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.showItem(i))}),e._UZ(4,"i",21),e.qZA(),e.TgZ(5,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.imprimer(i))}),e._UZ(6,"i",23),e.qZA(),e.TgZ(7,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.confirmDeleteItem(i))}),e._UZ(8,"i",25),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.status==n.referentials.mvtStatus[1].valeur),e.xp6(4),e.Q6J("disabled",t.status!=n.referentials.mvtStatus[1].valeur),e.xp6(2),e.Q6J("disabled",t.status==n.referentials.mvtStatus[1].valeur)}}function V(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"td")(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"td")(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"span"),e._uU(19),e.qZA()(),e.TgZ(20,"td"),e.YNc(21,Y,3,1,"span",4)(22,j,3,1,"span",4)(23,z,3,1,"span",4),e.qZA(),e.YNc(24,H,9,3,"td",14),e.qZA()),2&o){const t=s.$implicit,n=s.index,i=e.oxw(2);e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(e.xi3(7,10,t.dateEntree,"dd/MM/yyyy")),e.xp6(4),e.Oqu(t.numeroCmd),e.xp6(3),e.Oqu(t.exerciceBudgetaire),e.xp6(3),e.Oqu(null==t.magasin?null:t.magasin.nomMagasin),e.xp6(3),e.Oqu(null==t.fournisseur?null:t.fournisseur.libelle),e.xp6(2),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[0].valeur),e.xp6(1),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[1].valeur),e.xp6(1),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[2].valeur),e.xp6(1),e.Q6J("appHasAnyAuthority",i.droit)}}const $=(o,s,t)=>({itemsPerPage:o,currentPage:s,totalItems:t});function K(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th",9),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",9),e._uU(7,"Date"),e.qZA(),e.TgZ(8,"th",9),e._uU(9,"N\xb0 entr\xe9e"),e.qZA(),e.TgZ(10,"th",9),e._uU(11,"Exercice budg\xe9taire"),e.qZA(),e.TgZ(12,"th",9),e._uU(13,"Magasin"),e.qZA(),e.TgZ(14,"th",9),e._uU(15,"Fournisseur"),e.qZA(),e.TgZ(16,"th",9),e._uU(17,"Statut"),e.qZA(),e.YNc(18,Q,2,0,"th",10),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,V,25,13,"tr",11),e.ALo(21,"paginate"),e.qZA()(),e.TgZ(22,"div",12)(23,"pagination-controls",13),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onTableDataChange(i))}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("striped",!0),e.xp6(17),e.Q6J("appHasAnyAuthority",t.droit),e.xp6(2),e.Q6J("ngForOf",e.xi3(21,5,t.entrees,e.kEZ(8,$,t.itemsPerPage,t.page,t.totalItems))),e.xp6(3),e.s9C("previousLabel",t.previousLabel),e.s9C("nextLabel",t.nextLabel)}}function G(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",15),e._uU(2,"Aucun enregistrement trouv\xe9!"),e.qZA()())}let X=(()=>{class o{constructor(t,n,i,r,l){this.entreeService=t,this.activatedRoute=n,this.router=i,this.referentialService=r,this.modalService=l,this.totalItems=0,this.itemsPerPage=T.gK,this.nextLabel=T.wt,this.previousLabel=T.V$,this.predicate="idEntree",this.ngbPaginationPage=1,this.droit="ADD_MVT"}ngOnInit(){this.referentialService.query().subscribe({next:t=>{this.referentials=t.body||[],console.log("REFERENTIALS : ",this.referentials)},error:t=>console.log("ERROR : ",t)}),this.handleNavigation()}ngOnDestroy(){console.log("Dans ben com, ngOnDestroy")}loadPage(t,n){const i=t||this.page||1;this.entreeService.query({page:i-1,size:this.itemsPerPage,sort:this.sort()}).subscribe({next:r=>{this.onSuccess(r.body,r.headers,i,!n)},error:()=>this.onError()})}handleNavigation(){this.loadPage()}trackId(t,n){return n.idEntree}confirmDeleteItem(t){p().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(n=>{n.isConfirmed&&this.delete(t)})}delete(t){this.entreeService.delete(t.idEntree).subscribe({next:n=>{this.loadPage()},error:n=>{if(console.log("ERROR : ",n),n.error&&"msg"in n.error){const i=""+n.error.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:i})}}})}sort(){const t=[this.predicate+","+(this.ascending?"asc":"desc")];return"idEntree"!==this.predicate&&t.push("idEntree"),t}onSuccess(t,n,i,r){this.totalItems=Number(n.get("x-total-count")),this.page=i,r&&this.router.navigate(["/mouvement/entree"],{queryParams:{page:this.page,size:this.itemsPerPage,sort:this.predicate+","+(this.ascending?"asc":"desc")}}),this.entrees=t||[],this.ngbPaginationPage=this.page}onError(){this.ngbPaginationPage=this.page??1}editItem(t){this.router.navigate(["mouvement","entree",t.idEntree,"edit"])}showItem(t){this.router.navigate(["mouvement","entree",t.idEntree,"details"])}onTableDataChange(t){this.page=t,this.loadPage()}onTableSizeChange(t){this.itemsPerPage=t.target.value,this.page=1,this.loadPage()}getStatusLabel(t){return this.referentials.mvtStatus.find(i=>i.valeur==t).libelle}imprimer(t){const n=this.modalService.open(O,{size:"md",backdrop:"static"});n.componentInstance.confirmeMsg="l'entr\xe9e N\xb0 ".concat(t.numeroCmd),n.result.then(i=>{this.entreeService.generateEtat(t.idEntree,i).subscribe({next:r=>{if(console.log(r),null!==r){const l=new Blob([r],{type:"application/pdf"}),g=URL.createObjectURL(l);window.open(g,"_blank")}},error:r=>{console.log(r)}})},i=>console.log(i))}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(C.w),e.Y36(_.gz),e.Y36(_.F0),e.Y36(h.G),e.Y36(d.FF))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-entree"]],decls:9,vars:3,consts:[[1,"mb-4"],["md","10"],["md","2",4,"appHasAnyAuthority"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["md","2"],["cButton","","color","primary","variant","outline","size","sm",1,"float-end",3,"routerLink"],[1,"table-responsive"],["cTable","",3,"striped"],["scope","col"],["scope","col",4,"appHasAnyAuthority"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[3,"previousLabel","nextLabel","pageChange"],[4,"appHasAnyAuthority"],["color","warning"],["color","success"],["color","danger"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],["cIcon","","name","cilPen","size","sm"],["type","button",1,"btn","btn-outline-info","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-eye"],["type","button",1,"btn","btn-outline-success","btn-sm",2,"margin-left","2px",3,"disabled","click"],[1,"fa","fa-print"],["type","button",1,"btn","btn-outline-danger","btn-sm",2,"margin-left","2px",3,"disabled","click"],[1,"fa","fa-remove"]],template:function(n,i){1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),e._uU(4," Entr\xe9es "),e.qZA(),e.YNc(5,D,3,2,"c-col",2),e.qZA()(),e.TgZ(6,"c-card-body"),e.YNc(7,K,24,12,"div",3)(8,G,3,0,"div",4),e.qZA()()),2&n&&(e.xp6(5),e.Q6J("appHasAnyAuthority",i.droit),e.xp6(2),e.Q6J("ngIf",i.entrees&&i.entrees.length>0),e.xp6(1),e.Q6J("ngIf",i.entrees&&0==i.entrees.length))},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.Yp0,a.iok,a.auY,A.ar,a.wxo,q.LS,S.o,a.FN3,m.uU,q._s],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return o})();var E=u(3250),b=u(6676);class P{constructor(s,t,n,i,r,l,g,f,Z,v,x,y,xt,Ct,St,Mt,Ut){this.idSortie=s,this.dateSortie=t,this.motifSortie=n,this.validerLe=i,this.validerPar=r,this.description=l,this.ordonnateur=g,this.beneficiaire=f,this.detenteur=Z,this.magasin=v,this.ligneSorties=x,this.status=y,this.numeroSortie=xt,this.createdBy=Ct,this.createdDate=St,this.lastModifiedBy=Mt,this.lastModifiedDate=Ut,this.dateSortie=b().format("yyyy-MM-DD")}}class W{constructor(s,t,n,i,r,l,g,f,Z){this.idLigneSortie=s,this.quantiteLigne=t,this.isCloseSortie=n,this.sortie=i,this.medaille=r,this.createdBy=l,this.createdDate=g,this.lastModifiedBy=f,this.lastModifiedDate=Z,this.isCloseSortie=!1}}function ee(o,s){if(1&o&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idMedaille),e.xp6(1),e.Oqu(t.nomComplet)}}let k=(()=>{class o{constructor(t,n){this.activeModal=t,this.referentialService=n,this.ligneSortie=new W}ngOnInit(){this.referentialService.getMedaillesForSelect().subscribe({next:t=>{this.medailles=t.body||[]},error:t=>console.log("ERROR : ",t)})}save(){this.ligneSortie.medaille=this.medailles?.find(t=>t.idMedaille===this.selectedMedailleId),this.activeModal.close(this.ligneSortie)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz),e.Y36(h.G))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-ligne-sortie"]],decls:23,vars:3,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","6"],["cLabel","","for","field_medaille"],["aria-label","Small select example","cSelect","","sizing","sm","name","medaille",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["cLabel","","for","field_raisonSociale"],["cFormControl","","sizing","sm","id","field_raisonSociale","type","text","name","raisonSociale",3,"ngModel","ngModelChange"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],[3,"ngValue"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Ajouter/Modifier une ligne de sortie"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"c-row")(11,"c-col",8)(12,"label",9),e._uU(13,"Selectionner la m\xe9daille :"),e.qZA(),e.TgZ(14,"select",10),e.NdJ("ngModelChange",function(l){return i.selectedMedailleId=l}),e.YNc(15,ee,2,2,"option",11),e.qZA()(),e.TgZ(16,"c-col",8)(17,"label",12),e._uU(18,"Quantit\xe9 :"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(l){return i.ligneSortie.quantiteLigne=l}),e.qZA()()()(),e.TgZ(20,"div",14)(21,"button",15),e.NdJ("click",function(){return i.save()}),e._uU(22,"Valider"),e.qZA()()()()),2&n&&(e.xp6(14),e.Q6J("ngModel",i.selectedMedailleId),e.xp6(1),e.Q6J("ngForOf",i.medailles),e.xp6(4),e.Q6J("ngModel",i.ligneSortie.quantiteLigne))},dependencies:[m.sg,a.Hq3,a.oHf,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F]})}return o})();var M=u(1781);const te=()=>["/mouvement/sortie/nouvelle"];function ne(o,s){1&o&&(e.TgZ(0,"c-col",5)(1,"button",6),e._uU(2,"Ajouter"),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,te)))}function ie(o,s){1&o&&(e.TgZ(0,"th",9),e._uU(1,"Action"),e.qZA())}function oe(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",15),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function re(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",16),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function le(o,s){if(1&o&&(e.TgZ(0,"span")(1,"c-badge",17),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.getStatusLabel(t.status))}}function se(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"td")(1,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.editItem(i))}),e.O4$(),e._UZ(2,"svg",19),e.qZA(),e.kcU(),e.TgZ(3,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.showItem(i))}),e._UZ(4,"i",21),e.qZA(),e.TgZ(5,"button",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.imprimer(i))}),e._UZ(6,"i",23),e.qZA(),e.TgZ(7,"button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.confirmDeleteItem(i))}),e._UZ(8,"i",25),e.qZA()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.status==n.referentials.mvtStatus[1].valeur),e.xp6(4),e.Q6J("disabled",t.status!=n.referentials.mvtStatus[1].valeur),e.xp6(2),e.Q6J("disabled",t.status==n.referentials.mvtStatus[1].valeur)}}function ae(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"td")(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"td")(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"span"),e._uU(19),e.qZA()(),e.TgZ(20,"td"),e.YNc(21,oe,3,1,"span",4)(22,re,3,1,"span",4)(23,le,3,1,"span",4),e.qZA(),e.YNc(24,se,9,3,"td",14),e.qZA()),2&o){const t=s.$implicit,n=s.index,i=e.oxw(2);e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(e.xi3(7,10,t.dateSortie,"dd/MM/yyyy")),e.xp6(4),e.Oqu(t.numeroSortie),e.xp6(3),e.Oqu(null==t.ordonnateur?null:t.ordonnateur.matricule),e.xp6(3),e.Oqu(null==t.beneficiaire?null:t.beneficiaire.raisonSociale),e.xp6(3),e.Oqu(null==t.magasin?null:t.magasin.nomMagasin),e.xp6(2),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[0].valeur),e.xp6(1),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[1].valeur),e.xp6(1),e.Q6J("ngIf",t.status==i.referentials.mvtStatus[2].valeur),e.xp6(1),e.Q6J("appHasAnyAuthority",i.droit)}}const ce=(o,s,t)=>({itemsPerPage:o,currentPage:s,totalItems:t});function de(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th",9),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",9),e._uU(7,"Date"),e.qZA(),e.TgZ(8,"th",9),e._uU(9,"N\xb0 sortie"),e.qZA(),e.TgZ(10,"th",9),e._uU(11,"Ordonnateur"),e.qZA(),e.TgZ(12,"th",9),e._uU(13,"B\xe9n\xe9ficiaire"),e.qZA(),e.TgZ(14,"th",9),e._uU(15,"Magasin"),e.qZA(),e.TgZ(16,"th",9),e._uU(17,"Statut"),e.qZA(),e.YNc(18,ie,2,0,"th",10),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,ae,25,13,"tr",11),e.ALo(21,"paginate"),e.qZA()(),e.TgZ(22,"div",12)(23,"pagination-controls",13),e.NdJ("pageChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onTableDataChange(i))}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("striped",!0),e.xp6(17),e.Q6J("appHasAnyAuthority",t.droit),e.xp6(2),e.Q6J("ngForOf",e.xi3(21,5,t.sorties,e.kEZ(8,ce,t.itemsPerPage,t.page,t.totalItems))),e.xp6(3),e.s9C("previousLabel",t.previousLabel),e.s9C("nextLabel",t.nextLabel)}}function ue(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",15),e._uU(2,"Aucun enregistrement trouv\xe9!"),e.qZA()())}let ge=(()=>{class o{constructor(t,n,i,r,l){this.sortieService=t,this.activatedRoute=n,this.router=i,this.modalService=r,this.referentialService=l,this.totalItems=0,this.itemsPerPage=T.gK,this.predicate="idSortie",this.ngbPaginationPage=1,this.sortie=new P,this.nextLabel=T.wt,this.previousLabel=T.V$,this.droit="ADD_MVT"}ngOnInit(){this.referentialService.query().subscribe({next:t=>{this.referentials=t.body||[],console.log("REFERENTIALS : ",this.referentials)},error:t=>console.log("ERROR : ",t)}),this.handleNavigation()}ngOnDestroy(){console.log("Dans ben com, ngOnDestroy")}loadPage(t,n){const i=t||this.page||1;this.sortieService.query({page:i-1,size:this.itemsPerPage,sort:this.sort()}).subscribe({next:r=>{this.onSuccess(r.body,r.headers,i,!n)},error:()=>this.onError()})}handleNavigation(){this.loadPage()}trackId(t,n){return n.idSortie}confirmDeleteItem(t){p().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(n=>{n.isConfirmed&&(this.delete(t),p().fire({title:"Supprim\xe9!",text:"Element supprim\xe9.",icon:"success"}))})}delete(t){this.sortieService.delete(t.idSortie).subscribe({next:n=>{this.loadPage()},error:n=>{if(console.log("ERROR : ",n),n.error&&"msg"in n.error){const i=""+n.error.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:i})}}})}sort(){const t=[this.predicate+","+(this.ascending?"asc":"desc")];return"idSortie"!==this.predicate&&t.push("idSortie"),t}onSuccess(t,n,i,r){this.totalItems=Number(n.get("X-Total-Count")),this.page=i,r&&this.router.navigate(["/mouvement/sortie"],{queryParams:{page:this.page,size:this.itemsPerPage,sort:this.predicate+","+(this.ascending?"asc":"desc")}}),this.sorties=t||[],this.ngbPaginationPage=this.page}onError(){this.ngbPaginationPage=this.page??1}openAddEditModal(t){const n=this.modalService.open(k,{size:"lg",backdrop:"static"});null!=t?.idLigneSortie&&(n.componentInstance.ligneSortie=(0,E.Z)(t)),n.result.then(()=>{this.loadPage()},i=>{console.log(i)})}editItem(t){this.router.navigate(["mouvement","sortie",t.idSortie,"edit"])}showItem(t){this.router.navigate(["mouvement","sortie",t.idSortie,"details"])}onTableDataChange(t){this.page=t,this.loadPage()}onTableSizeChange(t){this.itemsPerPage=t.target.value,this.page=1,this.loadPage()}getStatusLabel(t){return this.referentials.mvtStatus.find(i=>i.valeur==t).libelle}imprimer(t){const n=this.modalService.open(O,{size:"md",backdrop:"static"});n.componentInstance.confirmeMsg="la sortie N\xb0 ".concat(t.numeroSortie),n.result.then(i=>{this.sortieService.generateEtat(t.idSortie,i).subscribe({next:r=>{if(console.log(r),null!==r){const l=new Blob([r],{type:"application/pdf"}),g=URL.createObjectURL(l);window.open(g,"_blank")}},error:r=>{console.log(r)}})},i=>console.log(i))}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(M.Y),e.Y36(_.gz),e.Y36(_.F0),e.Y36(d.FF),e.Y36(h.G))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-sortie"]],decls:9,vars:3,consts:[[1,"mb-4"],["md","10"],["md","2",4,"appHasAnyAuthority"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["md","2"],["cButton","","color","primary","variant","outline","size","sm",1,"float-end",3,"routerLink"],[1,"table-responsive"],["cTable","",3,"striped"],["scope","col"],["scope","col",4,"appHasAnyAuthority"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[3,"previousLabel","nextLabel","pageChange"],[4,"appHasAnyAuthority"],["color","warning"],["color","success"],["color","danger"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"disabled","click"],["cIcon","","name","cilPen","size","sm"],["type","button",1,"btn","btn-outline-info","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-eye"],["type","button",1,"btn","btn-outline-success","btn-sm",2,"margin-left","2px",3,"disabled","click"],[1,"fa","fa-print"],["type","button",1,"btn","btn-outline-danger","btn-sm",2,"margin-left","2px",3,"disabled","click"],[1,"fa","fa-remove"]],template:function(n,i){1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),e._uU(4," Sorties "),e.qZA(),e.YNc(5,ne,3,2,"c-col",2),e.qZA()(),e.TgZ(6,"c-card-body"),e.YNc(7,de,24,12,"div",3)(8,ue,3,0,"div",4),e.qZA()()),2&n&&(e.xp6(5),e.Q6J("appHasAnyAuthority",i.droit),e.xp6(2),e.Q6J("ngIf",i.sorties&&i.sorties.length>0),e.xp6(1),e.Q6J("ngIf",i.sorties&&0==i.sorties.length))},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.Yp0,a.iok,a.auY,A.ar,a.wxo,q.LS,S.o,a.FN3,m.uU,q._s],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return o})();var pe=u(5168);class _e{constructor(s,t,n,i,r,l,g,f,Z,v,x){this.idLigneEntree=s,this.quantiteLigne=t,this.prixUnitaire=n,this.montantLigne=i,this.isCloseEntree=r,this.entree=l,this.medaille=g,this.createdBy=f,this.createdDate=Z,this.lastModifiedBy=v,this.lastModifiedDate=x,this.isCloseEntree=!1}}function me(o,s){if(1&o&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idMedaille),e.xp6(1),e.Oqu(t.nomComplet)}}let fe=(()=>{class o{constructor(t,n){this.activeModal=t,this.referentialService=n,this.ligneEntree=new _e}ngOnInit(){this.referentialService.getMedaillesForSelect().subscribe({next:t=>{this.medailles=t.body||[]},error:t=>console.log("ERROR : ",t)})}save(){this.ligneEntree.medaille=this.medailles?.find(t=>t.idMedaille===this.selectedMedailleId),this.activeModal.close(this.ligneEntree)}close(){this.activeModal.dismiss()}calculerMontant(t){console.log("calcul...",t),null!=this.ligneEntree.prixUnitaire&&null!=this.ligneEntree.quantiteLigne&&(this.ligneEntree.montantLigne=this.ligneEntree.prixUnitaire*this.ligneEntree.quantiteLigne)}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz),e.Y36(h.G))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-ligne-entree"]],decls:32,vars:6,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","6"],["cLabel","","for","field_medaille"],["aria-label","Small select example","cSelect","","sizing","sm","name","medaille",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["cLabel","","for","field_raisonSociale"],["cFormControl","","sizing","sm","id","field_raisonSociale","type","text","name","raisonSociale",3,"ngModel","ngModelChange"],["cLabel","","for","field_telephoneFix"],["cFormControl","","sizing","sm","id","field_telephoneFix","type","text","name","telephoneFix",3,"ngModel","ngModelChange"],["cLabel","","for","field_field_telephoneMobile"],["cFormControl","","sizing","sm","id","field_field_telephoneMobile","type","text","name","telephoneMobile",3,"ngModel","readOnly","ngModelChange"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],[3,"ngValue"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Ajouter/Modifier une ligne d'entr\xe9e"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"c-row")(11,"c-col",8)(12,"label",9),e._uU(13,"Selectionner la m\xe9daille :"),e.qZA(),e.TgZ(14,"select",10),e.NdJ("ngModelChange",function(l){return i.selectedMedailleId=l}),e.YNc(15,me,2,2,"option",11),e.qZA()(),e.TgZ(16,"c-col",8)(17,"label",12),e._uU(18,"Quantit\xe9 :"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(l){return i.ligneEntree.quantiteLigne=l})("ngModelChange",function(l){return i.calculerMontant(l)}),e.qZA()()(),e.TgZ(20,"c-row")(21,"c-col",8)(22,"label",14),e._uU(23,"Prix unitaire :"),e.qZA(),e.TgZ(24,"input",15),e.NdJ("ngModelChange",function(l){return i.ligneEntree.prixUnitaire=l})("ngModelChange",function(l){return i.calculerMontant(l)}),e.qZA()(),e.TgZ(25,"c-col",8)(26,"label",16),e._uU(27,"Montant :"),e.qZA(),e.TgZ(28,"input",17),e.NdJ("ngModelChange",function(l){return i.ligneEntree.montantLigne=l}),e.qZA()()()(),e.TgZ(29,"div",18)(30,"button",19),e.NdJ("click",function(){return i.save()}),e._uU(31,"Valider"),e.qZA()()()()),2&n&&(e.xp6(14),e.Q6J("ngModel",i.selectedMedailleId),e.xp6(1),e.Q6J("ngForOf",i.medailles),e.xp6(4),e.Q6J("ngModel",i.ligneEntree.quantiteLigne),e.xp6(5),e.Q6J("ngModel",i.ligneEntree.prixUnitaire),e.xp6(4),e.Q6J("ngModel",i.ligneEntree.montantLigne)("readOnly",!0))},dependencies:[m.sg,a.Hq3,a.oHf,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F]})}return o})();class he{constructor(s,t,n,i,r,l,g,f,Z,v,x,y){this.idPiece=s,this.typePiece=t,this.lienPiece=n,this.referencePiece=i,this.description=r,this.entree=l,this.sortie=g,this.fileBase64Content=f,this.createdBy=Z,this.createdDate=v,this.lastModifiedBy=x,this.lastModifiedDate=y}}function Ze(o,s){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",null==t?null:t.valeur),e.xp6(1),e.Oqu(null==t?null:t.libelle)}}let R=(()=>{class o{constructor(t,n){this.activeModal=t,this.referentialService=n,this.pieceJointe=new he,this.result={},this.file=null}ngOnInit(){this.referentialService.query().subscribe({next:t=>{this.referentials=t.body||[],console.log("REFERENTIALS : ",this.referentials),this.typePieces=this.referentials.typePieces.filter(n=>n.typeMvt==this.typeMvt)},error:t=>console.log("ERROR : ",t)})}save(){this.result.pieceJointe=this.pieceJointe,this.result.file=this.file,this.activeModal.close(this.result)}close(){this.activeModal.dismiss()}onFileChange(t){const n=t.target.files[0];n&&(this.file=n,this.pieceJointe.lienPiece=n.name,console.warn("file",n))}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz),e.Y36(h.G))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-pj"]],decls:28,vars:3,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","6"],["cLabel","","for","field_medaille"],["aria-label","Small select example","cSelect","","sizing","sm","name","medaille",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["cLabel","","for","field_raisonSociale"],["cFormControl","","sizing","sm","id","field_raisonSociale","type","text","name","raisonSociale",3,"ngModel","ngModelChange"],["md","12"],["cLabel","","for","field_telephoneFix"],["cFormControl","","sizing","sm","id","field_justificatif","type","file","name","justificatif",1,"file-input",3,"change"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],[3,"ngValue"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Ajouter/Modifier une pi\xe8ce justificative"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"c-row")(11,"c-col",8)(12,"label",9),e._uU(13,"Selectionner le type de pi\xe8ce :"),e.qZA(),e.TgZ(14,"select",10),e.NdJ("ngModelChange",function(l){return i.pieceJointe.typePiece=l}),e.YNc(15,Ze,2,2,"option",11),e.qZA()(),e.TgZ(16,"c-col",8)(17,"label",12),e._uU(18,"R\xe9f\xe9rence de la pi\xe8ce :"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(l){return i.pieceJointe.referencePiece=l}),e.qZA()()(),e.TgZ(20,"c-row")(21,"c-col",14)(22,"label",15),e._uU(23,"Charger la pi\xe8ce :"),e.qZA(),e.TgZ(24,"input",16),e.NdJ("change",function(l){return i.onFileChange(l)}),e.qZA()()()(),e.TgZ(25,"div",17)(26,"button",18),e.NdJ("click",function(){return i.save()}),e._uU(27,"Ajouter"),e.qZA()()()()),2&n&&(e.xp6(14),e.Q6J("ngModel",i.pieceJointe.typePiece),e.xp6(1),e.Q6J("ngForOf",i.typePieces),e.xp6(4),e.Q6J("ngModel",i.pieceJointe.referencePiece))},dependencies:[m.sg,a.Hq3,a.oHf,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F]})}return o})();var be=u(4684),N=u(9705);function ve(o,s){if(1&o&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idFournisseur),e.xp6(1),e.Oqu(t.libelle)}}function Te(o,s){if(1&o&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idMagasin),e.xp6(1),e.Oqu(t.nomMagasin)}}function Ae(o,s){if(1&o&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",null==t?null:t.valeur),e.xp6(1),e.Oqu(null==t?null:t.libelle)}}function qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span"),e._uU(15),e.qZA()(),e.TgZ(16,"td")(17,"button",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openAddEditModal(r))}),e.O4$(),e._UZ(18,"svg",35),e.qZA(),e.kcU(),e.TgZ(19,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.confirmRemoveLine(r))}),e._UZ(20,"i",37),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(null==t.medaille?null:t.medaille.nomComplet),e.xp6(3),e.Oqu(t.quantiteLigne),e.xp6(3),e.Oqu(t.prixUnitaire),e.xp6(3),e.Oqu(t.montantLigne)}}function Ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onPrevisualizePj(i))}),e._UZ(1,"i",40),e.qZA()}}function xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td"),e.YNc(14,Ee,2,0,"button",38),e.TgZ(15,"button",39),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openAddEditPjModal(r))}),e.O4$(),e._UZ(16,"svg",35),e.qZA(),e.kcU(),e.TgZ(17,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removePj(r))}),e._UZ(18,"i",37),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(t.typePiece),e.xp6(3),e.Oqu(t.referencePiece),e.xp6(3),e.Oqu(t.lienPiece),e.xp6(2),e.Q6J("ngIf",t.fileBase64Content)}}const Ce=()=>["/mouvement/entree"];let F=(()=>{class o{constructor(t,n,i,r,l,g,f){this.entreeService=t,this.activatedRoute=n,this.router=i,this.modalService=r,this.referentialService=l,this.fournisseurService=g,this.magasinService=f,this.isSaving=!1,this.entree=new pe.l}ngOnInit(){const t=+this.activatedRoute.snapshot.paramMap.get("id");t&&(this.entreeService.find(t).subscribe({next:n=>{n.body&&(this.entree=n.body,this.selectedFournisseurId=this.entree.fournisseur?.idFournisseur,this.selectedMagasinId=this.entree.magasin?.idMagasin,this.entree.dateEntree=b(this.entree.dateEntree).format("yyyy-MM-DD"),this.entree.dateReception=b(this.entree.dateReception).format("yyyy-MM-DD"),console.log("ENTREE : ",this.entree))},error:n=>console.log("ERROR : ",n)}),this.getAllPjForEntree(t)),this.referentialService.query().subscribe({next:n=>{this.referentials=n.body||[],console.log("REFERENTIALS : ",this.referentials)},error:n=>console.log("ERROR : ",n)}),this.fournisseurService.query().subscribe({next:n=>{this.fournisseurs=n.body||[]},error:n=>console.log("ERROR : ",n)}),this.magasinService.query().subscribe({next:n=>{this.magasins=n.body||[]},error:n=>console.log("ERROR : ",n)})}getAllPjForEntree(t){this.referentialService.getAllPieceJointes(t,"entree").subscribe({next:n=>{this.pieceJointes=n.body||[],console.log("PIECE_JOINTES_G ",this.pieceJointes)},error:n=>console.log("ERROR : ",n)})}onPrevisualizePj(t){for(var n=atob(t.fileBase64Content),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);let l=new Blob([i],{type:"application/pdf"});var g=URL.createObjectURL(l);window.open(g)}openAddEditModal(t){const n=this.modalService.open(fe,{size:"lg",backdrop:"static"});null!=t&&(n.componentInstance.ligneEntree=(0,E.Z)(t),n.componentInstance.selectedMedailleId=t.medaille?.idMedaille),n.result.then(i=>{null==this.entree.ligneEntrees&&(this.entree.ligneEntrees=[]);const r=this.entree.ligneEntrees.findIndex(l=>l.medaille?.nomComplet==i.medaille?.nomComplet);-1!=r&&this.entree.ligneEntrees.splice(r,1),this.entree.ligneEntrees.push(i)},i=>{console.log(i)})}confirmRemoveLine(t){p().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(n=>{n.isConfirmed&&this.removeLigne(t)})}showToast(t){p().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=p().stopTimer,i.onmouseleave=p().resumeTimer}}).fire({icon:"success",title:t})}removeLigne(t){let n=!1;const i=this.entree.ligneEntrees.findIndex(r=>r.idLigneEntree==t.idLigneEntree);return-1!=i&&(this.entree.ligneEntrees.splice(i,1),t.idLigneEntree?this.entreeService.deleteLine(this.entree.idEntree,t.idLigneEntree).subscribe({next:r=>{this.showToast("Ligne supprm\xe9e avec succ\xe8s.")},error:r=>{if(console.log("ERROR : ",r),r.error&&"msg"in r.error){const l=""+r.error.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}}}):this.showToast("Ligne supprim\xe9e avec succ\xe8s."),n=!0),n}openAddEditPjModal(t){const n=this.modalService.open(R,{size:"lg",backdrop:"static"});null!=t&&(n.componentInstance.pieceJointe=(0,E.Z)(t)),n.componentInstance.typeMvt="E",n.result.then(i=>{null==this.pieceJointes&&(this.pieceJointes=[]),null==this.files&&(this.files=[]);const r=this.pieceJointes.findIndex(l=>l.referencePiece==i.pieceJointe.referencePiece||l.typePiece==i.pieceJointe.typePiece);-1!=r&&(this.pieceJointes.splice(r,1),this.files.splice(r,1)),this.pieceJointes.push(i.pieceJointe),this.files.push(i.file)},i=>{console.log(i)})}removePj(t){let n=!1;const i=this.pieceJointes.findIndex(r=>r.idPiece==t.idPiece);return-1!=i&&(this.pieceJointes.splice(i,1),n=!0),n}goBack(){this.router.navigate(["/mouvement/entree"])}save(){this.entree.fournisseur=this.fournisseurs?.find(t=>t.idFournisseur===this.selectedFournisseurId),this.entree.magasin=this.magasins?.find(t=>t.idMagasin===this.selectedMagasinId),this.isSaving=!0,void 0!==this.entree?.idEntree?(console.log("UPDATING_ENTREE : ",this.entree),console.log("UPDATING_PJ : ",this.pieceJointes),this.subscribeToSaveResponse(this.entreeService.update(this.entree,this.pieceJointes,this.files))):this.subscribeToSaveResponse(this.entreeService.create(this.entree,this.pieceJointes,this.files))}subscribeToSaveResponse(t){t.subscribe({next:n=>{console.log("NEXT : ",n),this.onSaveSuccess()},error:n=>this.onSaveError(n)})}onSaveSuccess(){this.isSaving=!1,this.goBack()}onSaveError(t){this.isSaving=!1,t.error&&p().fire({icon:"error",title:"D\xe9sol\xe9!",text:t.error.msg})}trackById(t,n){return n.idEntree}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(C.w),e.Y36(_.gz),e.Y36(_.F0),e.Y36(d.FF),e.Y36(h.G),e.Y36(be.K),e.Y36(N.D))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-entree"]],decls:92,vars:16,consts:[[1,"mb-4"],[1,"text-white"],["md","10"],["md","2"],["cButton","","color","info","variant","outline","size","sm",1,"float-end",3,"routerLink"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","4"],[1,"mb-3","p-2",2,"border","solid 1.5px","border-radius","3px"],["cLabel","col",1,"pt-0"],["md","12"],["cLabel","","for","field_fournisseur"],["aria-label","Small select example","cSelect","","sizing","sm","name","fournisseur","id","field_fournisseur",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["cLabel","","for","field_magasin"],["aria-label","Small select example","cSelect","","sizing","sm","name","magasin","id","field_magasin",3,"ngModel","ngModelChange"],["cLabel","","for","field_acquisition"],["aria-label","Small select example","cSelect","","sizing","sm","name","acquisition","id","field_acquisition",3,"ngModel","ngModelChange"],["cLabel","","for","field_exerciceBudgetaire"],["cFormControl","","sizing","sm","id","field_exerciceBudgetaire","type","text","name","exerciceBudgetaire",3,"ngModel","ngModelChange"],["md","6"],["cLabel","","for","field_dateEntree"],["cFormControl","","sizing","sm","id","field_dateEntree","type","date","name","dateEntree",3,"ngModel","disabled","ngModelChange"],["cLabel","","for","field_dateReception"],["cFormControl","","sizing","sm","id","field_dateReception","type","date","name","dateReception",3,"ngModel","ngModelChange"],["md","8"],["cTable","",3,"striped"],["scope","col"],["cButton","","color","primary","variant","outline","size","sm",3,"click"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],[3,"ngValue"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["cIcon","","name","cilPen","size","sm"],["type","button",1,"btn","btn-outline-danger","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-remove"],["type","button","class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-eye"]],template:function(n,i){1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header",1)(2,"c-row")(3,"c-col",2),e._uU(4," Ajouter/Modifier une entr\xe9e "),e.qZA(),e.TgZ(5,"c-col",3)(6,"button",4),e._uU(7,"Retour"),e.qZA()()()(),e.TgZ(8,"c-card-body")(9,"form",5,6)(11,"div",7)(12,"c-row")(13,"c-col",8)(14,"fieldset",9)(15,"legend",10),e._uU(16,"Informations sur l'entr\xe9e"),e.qZA(),e.TgZ(17,"c-row")(18,"c-col",11)(19,"label",12),e._uU(20,"Selectionner le fournisseur :"),e.qZA(),e.TgZ(21,"select",13),e.NdJ("ngModelChange",function(l){return i.selectedFournisseurId=l}),e.YNc(22,ve,2,2,"option",14),e.qZA()(),e.TgZ(23,"c-col",11)(24,"label",15),e._uU(25,"Selectionner le magasin :"),e.qZA(),e.TgZ(26,"select",16),e.NdJ("ngModelChange",function(l){return i.selectedMagasinId=l}),e.YNc(27,Te,2,2,"option",14),e.qZA()(),e.TgZ(28,"c-col",11)(29,"label",17),e._uU(30,"Selectionner le motif d'acquisition :"),e.qZA(),e.TgZ(31,"select",18),e.NdJ("ngModelChange",function(l){return i.entree.acquisition=l}),e.YNc(32,Ae,2,2,"option",14),e.qZA()(),e.TgZ(33,"c-col",11)(34,"label",19),e._uU(35,"Exercice budg\xe9taire :"),e.qZA(),e.TgZ(36,"input",20),e.NdJ("ngModelChange",function(l){return i.entree.exerciceBudgetaire=l}),e.qZA()(),e.TgZ(37,"c-col",21)(38,"label",22),e._uU(39,"Date d'entr\xe9e :"),e.qZA(),e.TgZ(40,"input",23),e.NdJ("ngModelChange",function(l){return i.entree.dateEntree=l}),e.qZA()(),e.TgZ(41,"c-col",21)(42,"label",24),e._uU(43,"Date de r\xe9ception :"),e.qZA(),e.TgZ(44,"input",25),e.NdJ("ngModelChange",function(l){return i.entree.dateReception=l}),e.qZA()()()()(),e.TgZ(45,"c-col",26)(46,"c-row")(47,"c-col",11)(48,"fieldset",9)(49,"legend",10),e._uU(50,"Lignes de la commande"),e.qZA(),e.TgZ(51,"table",27)(52,"thead")(53,"tr")(54,"th",28),e._uU(55,"N\xb0"),e.qZA(),e.TgZ(56,"th",28),e._uU(57,"M\xe9daille"),e.qZA(),e.TgZ(58,"th",28),e._uU(59,"Quantit\xe9"),e.qZA(),e.TgZ(60,"th",28),e._uU(61,"Prix unitaire"),e.qZA(),e.TgZ(62,"th",28),e._uU(63,"Montant"),e.qZA(),e.TgZ(64,"th",28)(65,"button",29),e.NdJ("click",function(){return i.openAddEditModal()}),e._uU(66,"Nouvelle ligne"),e.qZA()()()(),e.TgZ(67,"tbody"),e.YNc(68,qe,21,5,"tr",30),e.qZA()()()(),e.TgZ(69,"c-col",11)(70,"fieldset",9)(71,"legend",10),e._uU(72,"Pi\xe8ces justificatives"),e.qZA(),e.TgZ(73,"table",27)(74,"thead")(75,"tr")(76,"th",28),e._uU(77,"N\xb0"),e.qZA(),e.TgZ(78,"th",28),e._uU(79,"Type pi\xe8ce"),e.qZA(),e.TgZ(80,"th",28),e._uU(81,"R\xe9f\xe9rence"),e.qZA(),e.TgZ(82,"th",28),e._uU(83,"Pi\xe8ce"),e.qZA(),e.TgZ(84,"th",28)(85,"button",29),e.NdJ("click",function(){return i.openAddEditPjModal()}),e._uU(86,"Ajouter"),e.qZA()()()(),e.TgZ(87,"tbody"),e.YNc(88,xe,19,5,"tr",30),e.qZA()()()()()()()(),e.TgZ(89,"div",31)(90,"button",32),e.NdJ("click",function(){return i.save()}),e._uU(91,"Enregistrer"),e.qZA()()()()()),2&n&&(e.xp6(6),e.Q6J("routerLink",e.DdM(15,Ce)),e.xp6(15),e.Q6J("ngModel",i.selectedFournisseurId),e.xp6(1),e.Q6J("ngForOf",i.fournisseurs),e.xp6(4),e.Q6J("ngModel",i.selectedMagasinId),e.xp6(1),e.Q6J("ngForOf",i.magasins),e.xp6(4),e.Q6J("ngModel",i.entree.acquisition),e.xp6(1),e.Q6J("ngForOf",null==i.referentials?null:i.referentials.acquisitions),e.xp6(4),e.Q6J("ngModel",i.entree.exerciceBudgetaire),e.xp6(4),e.Q6J("ngModel",i.entree.dateEntree)("disabled",!0),e.xp6(4),e.Q6J("ngModel",i.entree.dateReception),e.xp6(7),e.Q6J("striped",!0),e.xp6(17),e.Q6J("ngForOf",i.entree.ligneEntrees),e.xp6(5),e.Q6J("striped",!0),e.xp6(15),e.Q6J("ngForOf",i.pieceJointes))},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.oHf,a.eFW,a.nqR,a.Yp0,a.iok,a.auY,A.ar,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return o})();var Se=u(2574),Me=u(6660),Ue=u(5593),ye=u(5486);function Je(o,s){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idOrdonnateur),e.xp6(1),e.Oqu(t.matricule+" / "+t.nom+" / "+t.prenom)}}function Oe(o,s){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idBeneficiaire),e.xp6(1),e.Oqu(t.raisonSociale)}}function Pe(o,s){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idDetenteur),e.xp6(1),e.Oqu(t.matricule+" / "+t.nom+"/"+t.prenom)}}function ke(o,s){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",t.idMagasin),e.xp6(1),e.Oqu(t.nomMagasin)}}function Re(o,s){if(1&o&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("ngValue",null==t?null:t.valeur),e.xp6(1),e.Oqu(null==t?null:t.libelle)}}function Ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"button",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openAddEditModal(r))}),e.O4$(),e._UZ(12,"svg",36),e.qZA(),e.kcU(),e.TgZ(13,"button",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.confirmRemoveLine(r))}),e._UZ(14,"i",38),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(null==t.medaille?null:t.medaille.nomComplet),e.xp6(3),e.Oqu(t.quantiteLigne)}}function Fe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.onPrevisualizePj(i))}),e._UZ(1,"i",41),e.qZA()}}function we(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td"),e.YNc(14,Fe,2,0,"button",39),e.TgZ(15,"button",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.openAddEditPjModal(r))}),e.O4$(),e._UZ(16,"svg",36),e.qZA(),e.kcU(),e.TgZ(17,"button",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.removePj(r))}),e._UZ(18,"i",38),e.qZA()()()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(t.typePiece),e.xp6(3),e.Oqu(t.referencePiece),e.xp6(3),e.Oqu(t.lienPiece),e.xp6(2),e.Q6J("ngIf",t.fileBase64Content)}}const Le=()=>["/mouvement/sortie"];let w=(()=>{class o{constructor(t,n,i,r,l,g,f,Z,v){this.sortieService=t,this.activatedRoute=n,this.router=i,this.modalService=r,this.referentialService=l,this.magasinService=g,this.beneficiaireService=f,this.detenteurService=Z,this.ordonnateurService=v,this.isSaving=!1,this.sortie=new P}ngOnInit(){this.referentialService.query().subscribe({next:n=>{this.referentials=n.body||[],console.log("REFERENTIALS : ",this.referentials)},error:n=>console.log("ERROR : ",n)}),this.magasinService.query().subscribe({next:n=>{this.magasins=n.body||[]},error:n=>console.log("ERROR : ",n)}),this.beneficiaireService.query().subscribe({next:n=>{this.beneficiaires=n.body||[]},error:n=>console.log("ERROR : ",n)}),this.getDetenteurs(),this.ordonnateurService.query().subscribe({next:n=>{this.ordonnateurs=n.body||[],console.log("ORDONNATEUR 1 :",this.ordonnateurs[1])},error:n=>console.log("ERROR : ",n)});const t=+this.activatedRoute.snapshot.paramMap.get("id");t&&(this.sortieService.find(t).subscribe({next:n=>{n.body&&(this.sortie=n.body,console.log("SORTIE : ",this.sortie),this.ordonnateurId=this.sortie.ordonnateur?.idOrdonnateur,this.selectedBeneficiaireId=this.sortie.beneficiaire?.idBeneficiaire,this.selectedDetenteurId=this.sortie.detenteur?.idDetenteur,this.selectedMagasinId=this.sortie.magasin?.idMagasin,this.sortie.dateSortie=b(this.sortie.dateSortie).format("yyyy-MM-DD"))},error:n=>console.log("ERROR : ",n)}),this.getAllPjForSortie(t))}getDetenteurs(){this.detenteurService.query().subscribe({next:t=>{this.detenteurs=t.body||[]},error:t=>console.log("ERROR : ",t)})}getAllPjForSortie(t){this.referentialService.getAllPieceJointes(t,"sortie").subscribe({next:n=>{this.pieceJointes=n.body||[],console.log("PIECE_JOINTES_G ",this.pieceJointes)},error:n=>console.log("ERROR : ",n)})}onPrevisualizePj(t){for(var n=atob(t.fileBase64Content),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);let l=new Blob([i],{type:"application/pdf"});var g=URL.createObjectURL(l);window.open(g)}addRepresentant(){if(this.selectedBeneficiaireId){const t=this.modalService.open(Se.s,{size:"lg",backdrop:"static"});t.componentInstance.fromSortie=!0,t.componentInstance.selectedBeneficiaireIdFromSortie=this.selectedBeneficiaireId,t.result.then(n=>{console.log("REPRESENTANT: ",n),this.getDetenteurs(),this.selectedDetenteurId=n.idDetenteur},n=>{console.log(n)})}else p().fire({icon:"error",title:"D\xe9sol\xe9!",text:"Veuillez selectionner la structure b\xe9n\xe9ficiaire!"})}openAddEditModal(t){const n=this.modalService.open(k,{size:"lg",backdrop:"static"});null!=t&&(n.componentInstance.ligneSortie=(0,E.Z)(t),n.componentInstance.selectedMedailleId=t.medaille?.idMedaille),n.result.then(i=>{null==this.sortie.ligneSorties&&(this.sortie.ligneSorties=[]);const r=this.sortie.ligneSorties.findIndex(l=>l.medaille?.nomComplet==i.medaille?.nomComplet);-1!=r&&this.sortie.ligneSorties.splice(r,1),console.log("MEDAILLE CHOOSED : ",i),this.sortie.ligneSorties.push(i)},i=>{console.log(i)})}confirmRemoveLine(t){p().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(n=>{n.isConfirmed&&this.removeLigne(t)})}showToast(t){p().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.onmouseenter=p().stopTimer,i.onmouseleave=p().resumeTimer}}).fire({icon:"success",title:t})}removeLigne(t){let n=!1;const i=this.sortie.ligneSorties.findIndex(r=>r.idLigneSortie==t.idLigneSortie);return-1!=i&&(this.sortie.ligneSorties.splice(i,1),t.idLigneSortie?this.sortieService.deleteLine(this.sortie.idSortie,t.idLigneSortie).subscribe({next:r=>{this.showToast("Ligne supprm\xe9e avec succ\xe8s.")},error:r=>{if(console.log("ERROR : ",r),r.error&&"msg"in r.error){const l=""+r.error.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}}}):this.showToast("Ligne supprm\xe9e avec succ\xe8s."),n=!0),n}openAddEditPjModal(t){const n=this.modalService.open(R,{size:"lg",backdrop:"static"});null!=t&&(n.componentInstance.pieceJointe=(0,E.Z)(t)),n.componentInstance.typeMvt="S",n.result.then(i=>{null==this.pieceJointes&&(this.pieceJointes=[]),null==this.files&&(this.files=[]);const r=this.pieceJointes.findIndex(l=>l.referencePiece==i.pieceJointe.referencePiece||l.typePiece==i.pieceJointe.typePiece);-1!=r&&(this.pieceJointes.splice(r,1),this.files.splice(r,1)),this.pieceJointes.push(i.pieceJointe),this.files.push(i.file)},i=>{console.log(i)})}removePj(t){let n=!1;const i=this.pieceJointes.findIndex(r=>r.idPiece==t.idPiece);return-1!=i&&(this.pieceJointes.splice(i,1),n=!0),n}goBack(){this.router.navigate(["/mouvement/sortie"])}save(){this.isSaving=!0,this.sortie.ordonnateur=this.ordonnateurs?.find(t=>t.idOrdonnateur===this.ordonnateurId),this.sortie.beneficiaire=this.beneficiaires?.find(t=>t.idBeneficiaire===this.selectedBeneficiaireId),this.sortie.magasin=this.magasins?.find(t=>t.idMagasin===this.selectedMagasinId),this.selectedDetenteurId&&(this.sortie.detenteur=this.detenteurs?.find(t=>t.idDetenteur===this.selectedDetenteurId)),this.subscribeToSaveResponse(void 0!==this.sortie?.idSortie?this.sortieService.update(this.sortie,this.pieceJointes,this.files):this.sortieService.create(this.sortie,this.pieceJointes,this.files))}subscribeToSaveResponse(t){t.subscribe({next:n=>{console.log("NEXT : ",n),this.onSaveSuccess()},error:n=>this.onSaveError(n)})}onSaveSuccess(){this.isSaving=!1,this.goBack()}onSaveError(t){this.isSaving=!1,t.error&&p().fire({icon:"error",title:"D\xe9sol\xe9!",text:t.error.msg})}trackById(t,n){return n.idSortie}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(M.Y),e.Y36(_.gz),e.Y36(_.F0),e.Y36(d.FF),e.Y36(h.G),e.Y36(N.D),e.Y36(Me.I),e.Y36(Ue.W),e.Y36(ye.A))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-edit-sortie"]],decls:95,vars:17,consts:[[1,"mb-4"],[1,"text-white"],["md","10"],["md","2"],["cButton","","color","info","variant","outline","ize","sm",1,"float-end",3,"routerLink"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","4"],[1,"mb-3","p-2",2,"border","solid 1.5px","border-radius","3px"],["cLabel","col",1,"pt-0"],["md","12"],["cLabel","","for","field_ordonnateur"],["aria-label","Small select example","cSelect","","sizing","sm","name","ordonnateur","id","field_ordonnateur",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["cLabel","","for","field_beneficiaire"],["aria-label","Small select example","cSelect","","sizing","sm","name","beneficiaire","id","field_beneficiaire",3,"ngModel","ngModelChange"],["cLabel","","for","field_detenteur"],["aria-label","Small select example","cSelect","","sizing","sm","name","detenteur","id","field_detenteur",3,"ngModel","ngModelChange"],["type","button","title","Ajouter un repr\xe9sentant",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-plus"],["cLabel","","for","field_magasin"],["aria-label","Small select example","cSelect","","sizing","sm","name","magasin","id","field_magasin",3,"ngModel","ngModelChange"],["cLabel","","for","field_motifSortie"],["aria-label","Small select example","cSelect","","sizing","sm","name","acquisition","id","field_motifSortie",3,"ngModel","ngModelChange"],["cLabel","","for","field_dateSortie"],["cFormControl","","sizing","sm","id","field_dateSortie","type","date","name","dateSortie",3,"ngModel","ngModelChange"],["md","8"],["cTable","",3,"striped"],["scope","col"],["cButton","","color","primary","variant","outline","size","sm",3,"click"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],[3,"ngValue"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["cIcon","","name","cilPen","size","sm"],["type","button",1,"btn","btn-outline-danger","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-remove"],["type","button","class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-eye"]],template:function(n,i){1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header",1)(2,"c-row")(3,"c-col",2),e._uU(4," Ajouter/Modifier une sortie "),e.qZA(),e.TgZ(5,"c-col",3)(6,"button",4),e._uU(7,"Retour"),e.qZA()()()(),e.TgZ(8,"c-card-body")(9,"form",5,6)(11,"div",7)(12,"c-row")(13,"c-col",8)(14,"fieldset",9)(15,"legend",10),e._uU(16,"Informations sur la sortie"),e.qZA(),e.TgZ(17,"c-row")(18,"c-col",11)(19,"label",12),e._uU(20,"Selectionner l'ordonnateur :"),e.qZA(),e.TgZ(21,"select",13),e.NdJ("ngModelChange",function(l){return i.ordonnateurId=l}),e.YNc(22,Je,2,2,"option",14),e.qZA()(),e.TgZ(23,"c-col",11)(24,"label",15),e._uU(25,"Selectionner la structure b\xe9n\xe9ficiaire :"),e.qZA(),e.TgZ(26,"select",16),e.NdJ("ngModelChange",function(l){return i.selectedBeneficiaireId=l}),e.YNc(27,Oe,2,2,"option",14),e.qZA()(),e.TgZ(28,"c-col",11)(29,"label",17),e._uU(30,"Selectionner le repr\xe9sentant :"),e.qZA(),e.TgZ(31,"c-row")(32,"c-col",2)(33,"select",18),e.NdJ("ngModelChange",function(l){return i.selectedDetenteurId=l}),e.YNc(34,Pe,2,2,"option",14),e.qZA()(),e.TgZ(35,"c-col",3)(36,"button",19),e.NdJ("click",function(){return i.addRepresentant()}),e._UZ(37,"i",20),e.qZA()()()(),e.TgZ(38,"c-col",11)(39,"label",21),e._uU(40,"Selectionner le magasin :"),e.qZA(),e.TgZ(41,"select",22),e.NdJ("ngModelChange",function(l){return i.selectedMagasinId=l}),e.YNc(42,ke,2,2,"option",14),e.qZA()(),e.TgZ(43,"c-col",11)(44,"label",23),e._uU(45,"Selectionner le motif de sortie :"),e.qZA(),e.TgZ(46,"select",24),e.NdJ("ngModelChange",function(l){return i.sortie.motifSortie=l}),e.YNc(47,Re,2,2,"option",14),e.qZA()(),e.TgZ(48,"c-col",11)(49,"label",25),e._uU(50,"Date de la sortie :"),e.qZA(),e.TgZ(51,"input",26),e.NdJ("ngModelChange",function(l){return i.sortie.dateSortie=l}),e.qZA()()()()(),e.TgZ(52,"c-col",27)(53,"c-row")(54,"c-col",11)(55,"fieldset",9)(56,"legend",10),e._uU(57,"Lignes de la sortie"),e.qZA(),e.TgZ(58,"table",28)(59,"thead")(60,"tr")(61,"th",29),e._uU(62,"N\xb0"),e.qZA(),e.TgZ(63,"th",29),e._uU(64,"M\xe9daille"),e.qZA(),e.TgZ(65,"th",29),e._uU(66,"Quantit\xe9"),e.qZA(),e.TgZ(67,"th",29)(68,"button",30),e.NdJ("click",function(){return i.openAddEditModal()}),e._uU(69,"Nouvelle ligne"),e.qZA()()()(),e.TgZ(70,"tbody"),e.YNc(71,Ne,15,3,"tr",31),e.qZA()()()(),e.TgZ(72,"c-col",11)(73,"fieldset",9)(74,"legend",10),e._uU(75,"Pi\xe8ces justificatives"),e.qZA(),e.TgZ(76,"table",28)(77,"thead")(78,"tr")(79,"th",29),e._uU(80,"N\xb0"),e.qZA(),e.TgZ(81,"th",29),e._uU(82,"Type pi\xe8ce"),e.qZA(),e.TgZ(83,"th",29),e._uU(84,"R\xe9f\xe9rence"),e.qZA(),e.TgZ(85,"th",29),e._uU(86,"Pi\xe8ce"),e.qZA(),e.TgZ(87,"th",29)(88,"button",30),e.NdJ("click",function(){return i.openAddEditPjModal()}),e._uU(89,"Ajouter"),e.qZA()()()(),e.TgZ(90,"tbody"),e.YNc(91,we,19,5,"tr",31),e.qZA()()()()()()()(),e.TgZ(92,"div",32)(93,"button",33),e.NdJ("click",function(){return i.save()}),e._uU(94,"Enregistrer"),e.qZA()()()()()),2&n&&(e.xp6(6),e.Q6J("routerLink",e.DdM(16,Le)),e.xp6(15),e.Q6J("ngModel",i.ordonnateurId),e.xp6(1),e.Q6J("ngForOf",i.ordonnateurs),e.xp6(4),e.Q6J("ngModel",i.selectedBeneficiaireId),e.xp6(1),e.Q6J("ngForOf",i.beneficiaires),e.xp6(6),e.Q6J("ngModel",i.selectedDetenteurId),e.xp6(1),e.Q6J("ngForOf",i.detenteurs),e.xp6(7),e.Q6J("ngModel",i.selectedMagasinId),e.xp6(1),e.Q6J("ngForOf",i.magasins),e.xp6(4),e.Q6J("ngModel",i.sortie.motifSortie),e.xp6(1),e.Q6J("ngForOf",null==i.referentials?null:i.referentials.motifsSortie),e.xp6(4),e.Q6J("ngModel",i.sortie.dateSortie),e.xp6(7),e.Q6J("striped",!0),e.xp6(13),e.Q6J("ngForOf",i.sortie.ligneSorties),e.xp6(5),e.Q6J("striped",!0),e.xp6(15),e.Q6J("ngForOf",i.pieceJointes))},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.oHf,a.eFW,a.nqR,a.Yp0,a.iok,a.auY,A.ar,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.On,c.F],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return o})(),Ie=(()=>{class o{constructor(t){this.activeModal=t}save(){this.activeModal.close(this.comment)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-rejet-entree"]],decls:22,vars:2,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"text-center"],["md","12"],["cLabel","","for","field_adresse"],["cFormControl","","id","field_observation","rows","3","name","comment",3,"ngModel","ngModelChange"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],["cButton","","color","warning","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Rejet d'une entr\xe9e"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"h5",8),e._uU(11),e.qZA(),e.TgZ(12,"c-row")(13,"c-col",9)(14,"label",10),e._uU(15,"Observation :"),e.qZA(),e.TgZ(16,"textarea",11),e.NdJ("ngModelChange",function(l){return i.comment=l}),e.qZA()()()(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){return i.save()}),e._uU(19,"Rejeter"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return i.close()}),e._uU(21,"Annuler"),e.qZA()()()()),2&n&&(e.xp6(11),e.hij("Etes-vous s\xfbr de vouloir rejeter l'entr\xe9e N\xb0 ",i.numEntree," ?"),e.xp6(5),e.Q6J("ngModel",i.comment))},dependencies:[a.Hq3,a.oHf,a.eFW,a.Yp0,a.iok,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#538136}"]})}return o})(),Be=(()=>{class o{constructor(t){this.activeModal=t}save(){this.activeModal.close(this.format)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-valider-entree"]],decls:26,vars:4,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"text-center"],["md","12"],["cLabel","","for","field_adresse"],["aria-label","Small select example","cSelect","","sizing","sm","name","format","id","field_format",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],["cButton","","color","warning","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Validation d'une entr\xe9e"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"h5",8),e._uU(11),e.qZA(),e.TgZ(12,"c-row")(13,"c-col",9)(14,"label",10),e._uU(15,"Selectionner le format de l'\xe9tat :"),e.qZA(),e.TgZ(16,"select",11),e.NdJ("ngModelChange",function(l){return i.format=l}),e.TgZ(17,"option",12),e._uU(18,"PDF"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"Word"),e.qZA()()()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return i.save()}),e._uU(23,"valider"),e.qZA(),e.TgZ(24,"button",16),e.NdJ("click",function(){return i.close()}),e._uU(25,"Annuler"),e.qZA()()()()),2&n&&(e.xp6(11),e.hij("Etes-vous s\xfbr de vouloir valider l'entr\xe9e N\xb0 ",i.numEntree," ?"),e.xp6(5),e.Q6J("ngModel",i.format),e.xp6(1),e.Q6J("ngValue","pdf"),e.xp6(2),e.Q6J("ngValue","word"))},dependencies:[a.Hq3,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.On,c.F],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#538136}"]})}return o})();function De(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Observaton :"),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"textarea",19),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("value",null==t.entree?null:t.entree.observation)("readOnly",!0)}}function Qe(o,s){if(1&o&&(e.TgZ(0,"c-row")(1,"c-col",11)(2,"c-row")(3,"c-col",12)(4,"fieldset",13)(5,"legend",14),e._uU(6,"G\xe9n\xe9ral"),e.qZA(),e.TgZ(7,"div",15)(8,"table",16)(9,"tbody")(10,"tr")(11,"th"),e._uU(12,"Date d'entr\xe9e"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()(),e.TgZ(15,"tr")(16,"th"),e._uU(17,"Date de r\xe9ception"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA()(),e.TgZ(20,"tr")(21,"th"),e._uU(22,"Exercice budg\xe9taire"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()(),e.TgZ(25,"tr")(26,"th"),e._uU(27,"Motif d'acquisition"),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.qZA()(),e.TgZ(30,"tr")(31,"th"),e._uU(32,"Statut"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA()(),e.YNc(35,De,5,2,"tr",17),e.qZA()()()()(),e.TgZ(36,"c-col",12)(37,"fieldset",13)(38,"legend",14),e._uU(39,"Magasin"),e.qZA(),e.TgZ(40,"div",15)(41,"table",16)(42,"tbody")(43,"tr")(44,"th"),e._uU(45,"Dep\xf4t"),e.qZA(),e.TgZ(46,"td"),e._uU(47),e.qZA()(),e.TgZ(48,"tr")(49,"th"),e._uU(50,"Nom"),e.qZA(),e.TgZ(51,"td"),e._uU(52),e.qZA()(),e.TgZ(53,"tr")(54,"th"),e._uU(55,"Capacit\xe9"),e.qZA(),e.TgZ(56,"td"),e._uU(57),e.qZA()()()()()()()()(),e.TgZ(58,"c-col",11)(59,"fieldset",13)(60,"legend",14),e._uU(61,"Fournisseur"),e.qZA(),e.TgZ(62,"div",15)(63,"table",16)(64,"tbody")(65,"tr")(66,"th"),e._uU(67,"Raison sociale"),e.qZA(),e.TgZ(68,"td"),e._uU(69),e.qZA()(),e.TgZ(70,"tr")(71,"th"),e._uU(72,"Sigle"),e.qZA(),e.TgZ(73,"td"),e._uU(74),e.qZA()(),e.TgZ(75,"tr")(76,"th"),e._uU(77,"N\xb0 IFU"),e.qZA(),e.TgZ(78,"td"),e._uU(79),e.qZA()(),e.TgZ(80,"tr")(81,"th"),e._uU(82,"N\xb0 de t\xe9l\xe9phone fixe"),e.qZA(),e.TgZ(83,"td"),e._uU(84),e.qZA()(),e.TgZ(85,"tr")(86,"th"),e._uU(87,"N\xb0 de t\xe9l\xe9phone mobile"),e.qZA(),e.TgZ(88,"td"),e._uU(89),e.qZA()(),e.TgZ(90,"tr")(91,"th"),e._uU(92,"Repr\xe9sentant"),e.qZA(),e.TgZ(93,"td"),e._uU(94),e.qZA()(),e.TgZ(95,"tr")(96,"th"),e._uU(97,"N\xb0 du repr\xe9sentant"),e.qZA(),e.TgZ(98,"td"),e._uU(99),e.qZA()(),e.TgZ(100,"tr")(101,"th"),e._uU(102,"Email du repr\xe9sentant"),e.qZA(),e.TgZ(103,"td"),e._uU(104),e.qZA()(),e.TgZ(105,"tr")(106,"th"),e._uU(107,"Adresse :"),e.qZA(),e.TgZ(108,"td"),e._UZ(109,"textarea",18),e.qZA()()()()()()()()),2&o){const t=e.oxw();e.xp6(14),e.Oqu(": "+t.entree.dateEntree),e.xp6(5),e.Oqu(": "+(null==t.entree?null:t.entree.dateReception)),e.xp6(5),e.Oqu(": "+(null==t.entree?null:t.entree.exerciceBudgetaire)),e.xp6(5),e.Oqu(": "+t.getAcquisitionLabel(null==t.entree?null:t.entree.acquisition)),e.xp6(5),e.Oqu(": "+t.getStatusLabel(null==t.entree?null:t.entree.status)),e.xp6(1),e.Q6J("ngIf",(null==t.entree?null:t.entree.status)==(null==t.referentials?null:t.referentials.mvtStatus[2].valeur)),e.xp6(12),e.Oqu(": "+(null==t.entree||null==t.entree.magasin||null==t.entree.magasin.depot?null:t.entree.magasin.depot.nomDepot)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.magasin?null:t.entree.magasin.nomMagasin)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.magasin?null:t.entree.magasin.capacite)),e.xp6(12),e.Oqu(": "+(null==t.entree.fournisseur?null:t.entree.fournisseur.libelle)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.sigle)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.numeroIfu)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.telephoneFix)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.numeroIfu)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.nomCompletPersonneRessource)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.telephonePersonneRessource)),e.xp6(5),e.Oqu(": "+(null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.email)),e.xp6(5),e.Q6J("value",null==t.entree||null==t.entree.fournisseur?null:t.entree.fournisseur.adresse)("readOnly",!0)}}function Ye(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td")(14,"span"),e._uU(15),e.qZA()()()),2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu((null==t.medaille?null:t.medaille.nomComplet)+" | "+(null==t.medaille?null:t.medaille.code)+" | "+(null==t.medaille?null:t.medaille.stock)),e.xp6(3),e.Oqu(t.quantiteLigne),e.xp6(3),e.Oqu(t.prixUnitaire),e.xp6(3),e.Oqu(t.montantLigne)}}function je(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"table",21)(2,"thead",22)(3,"tr")(4,"th",23),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",23),e._uU(7,"M\xe9daille(D\xe9signation | Code | Sock disponible)"),e.qZA(),e.TgZ(8,"th",23),e._uU(9,"Quantit\xe9"),e.qZA(),e.TgZ(10,"th",23),e._uU(11,"Prix unitaire"),e.qZA(),e.TgZ(12,"th",23),e._uU(13,"Montant"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,Ye,16,5,"tr",24),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("striped",!0),e.xp6(14),e.Q6J("ngForOf",t.entree.ligneEntrees)}}function ze(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",25),e._uU(2,"Aucun de lignes associ\xe9es \xe0 cette entr\xe9e!"),e.qZA()())}function He(o,s){if(1&o&&e.YNc(0,je,16,2,"div",20)(1,ze,3,0,"div",17),2&o){const t=e.oxw();e.Q6J("ngIf",(null==t.entree?null:t.entree.ligneEntrees)&&(null==t.entree?null:t.entree.ligneEntrees.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.entree?null:t.entree.ligneEntrees)&&0==(null==t.entree?null:t.entree.ligneEntrees.length))}}function Ve(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.onPrevisualizePj(i))}),e._UZ(1,"i",29),e.qZA()}}function $e(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td"),e.YNc(14,Ve,2,0,"button",27),e.qZA()()),2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(t.typePiece),e.xp6(3),e.Oqu(t.referencePiece),e.xp6(3),e.Oqu(t.lienPiece),e.xp6(2),e.Q6J("ngIf",t.fileBase64Content)}}function Ke(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"table",21)(2,"thead")(3,"tr")(4,"th",23),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",23),e._uU(7,"Type pi\xe8ce"),e.qZA(),e.TgZ(8,"th",23),e._uU(9,"R\xe9f\xe9rence"),e.qZA(),e.TgZ(10,"th",23),e._uU(11,"Pi\xe8ce"),e.qZA(),e._UZ(12,"th",23),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,$e,15,5,"tr",24),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("striped",!0),e.xp6(13),e.Q6J("ngForOf",t.pieceJointes)}}function Ge(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",25),e._uU(2,"Aucune pi\xe8ces jointes associ\xe9es \xe0 cette sortie!"),e.qZA()())}function Xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.rejeter(i.entree))}),e._uU(2,"Rejeter l'entr\xe9e"),e.qZA(),e.TgZ(3,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.valider(i.entree))}),e._uU(4,"Valider l'entr\xe9e"),e.qZA()()}}function We(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Xe,5,0,"div",30),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.entree.status!=t.referentials.mvtStatus[1].valeur)}}function et(o,s){if(1&o&&(e.YNc(0,Ke,15,2,"div",20)(1,Ge,3,0,"div",17),e._UZ(2,"hr"),e.YNc(3,We,2,1,"div",26)),2&o){const t=e.oxw();e.Q6J("ngIf",t.pieceJointes&&t.pieceJointes.length>0),e.xp6(1),e.Q6J("ngIf",t.pieceJointes&&0==t.pieceJointes.length),e.xp6(2),e.Q6J("appHasAnyAuthority",t.valide)}}const tt=()=>["/mouvement/entree"];let nt=(()=>{class o{constructor(t,n,i,r,l){this.entreeService=t,this.activatedRoute=n,this.router=i,this.referentialService=r,this.modalService=l,this.entree=null,this.active=1,this.valide="VALIDE_MVT"}ngOnInit(){this.referentialService.query().subscribe({next:t=>{this.referentials=t.body||[],console.log("REFERENTIALS : ",this.referentials)},error:t=>console.log("ERROR : ",t)}),this.activatedRoute.data.subscribe(({entree:t})=>{console.log("ENTRE RESOLVE : ",t.body),this.entree=t.body,this.entree.dateEntree=b(this.entree?.dateEntree).format("DD/MM/yyyy"),this.entree.dateReception=b(this.entree?.dateReception).format("DD/MM/yyyy")}),this.entree&&this.entree.idEntree&&this.getAllPjForEntree(this.entree.idEntree)}getAllPjForEntree(t){this.referentialService.getAllPieceJointes(t,"entree").subscribe({next:n=>{this.pieceJointes=n.body||[],console.log("PIECE_JOINTES_G ",this.pieceJointes)},error:n=>console.log("ERROR : ",n)})}onPrevisualizePj(t){for(var n=atob(t.fileBase64Content),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);let l=new Blob([i],{type:"application/pdf"});var g=URL.createObjectURL(l);window.open(g)}goBack(){this.router.navigate(["/mouvement/entree"])}generateEtat(t,n){this.entreeService.generateEtat(t,n).subscribe({next:i=>{if(console.log(i),null!==i){const r=new Blob([i],{type:"application/pdf"}),l=URL.createObjectURL(r);window.open(l,"_blank")}},error:i=>{console.log(i)}})}valider(t){const n=this.modalService.open(Be,{size:"md",backdrop:"static"});n.componentInstance.numEntree=t.numeroCmd,n.result.then(i=>{this.entreeService.valider(t.idEntree).subscribe({next:r=>{if(r.body&&"msg"in r.body){const l=""+r.body.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}else this.generateEtat(t.idEntree,i),this.goBack()},error:r=>console.log("ERROR : ",r)})},i=>console.log(i))}rejeter(t){const n=this.modalService.open(Ie,{size:"md",backdrop:"static"});n.componentInstance.numEntree=t.numeroCmd,n.result.then(i=>{t.observation=i,console.log("REJET : ",t),this.entreeService.rejeter(t.idEntree,i).subscribe({next:r=>{if(r.body&&"msg"in r.body){const l=""+r.body.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}else this.goBack()},error:r=>console.log("ERROR : ",r)})},i=>console.log(i))}getStatusLabel(t){return this.referentials?this.referentials.mvtStatus.find(i=>i.valeur==t).libelle:""}getAcquisitionLabel(t){return this.referentials?this.referentials.acquisitions.find(i=>i.valeur==t).libelle:""}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(C.w),e.Y36(_.gz),e.Y36(_.F0),e.Y36(h.G),e.Y36(d.FF))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-entree-detail"]],decls:24,vars:8,consts:[[1,"mb-4"],[1,"text-white"],["md","10"],["md","2"],["cButton","","color","info","variant","outline","size","sm",1,"float-end",3,"routerLink"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],["md","6"],["md","12"],[1,"mb-3","p-2",2,"border","solid 1.5px","border-radius","3px"],["cLabel","col",1,"pt-0"],[1,"table-responsive"],[1,"table","table-sm","no-border"],[4,"ngIf"],["name","adresse","id","field_adresse","rows","2",1,"form-control",3,"value","readOnly"],["name","observation","id","field_observation","rows","2",1,"form-control",3,"value","readOnly"],["class","table-responsive",4,"ngIf"],["cTable","",3,"striped"],[2,"font-weight","bold"],["scope","col"],[4,"ngFor","ngForOf"],["color","warning"],[4,"appHasAnyAuthority"],["type","button","class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-eye"],["class","float-end",4,"ngIf"],[1,"float-end"],["cButton","","color","primary","variant","outline","size","sm",3,"click"],["cButton","","color","success","variant","outline","size","sm",1,"mx-2",3,"click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header",1)(2,"c-row")(3,"c-col",2),e._uU(4),e.qZA(),e.TgZ(5,"c-col",3)(6,"button",4),e._uU(7,"Retour"),e.qZA()()()(),e.TgZ(8,"c-card-body")(9,"ul",5,6),e.NdJ("activeIdChange",function(l){return i.active=l}),e.TgZ(11,"li",7)(12,"button",8),e._uU(13,"Informations sur l'entr\xe9e"),e.qZA(),e.YNc(14,Qe,110,19,"ng-template",9),e.qZA(),e.TgZ(15,"li",7)(16,"button",8),e._uU(17,"Lignes de l'entr\xe9e"),e.qZA(),e.YNc(18,He,2,2,"ng-template",9),e.qZA(),e.TgZ(19,"li",7)(20,"button",8),e._uU(21,"Pi\xe8ces justificatives"),e.qZA(),e.YNc(22,et,4,3,"ng-template",9),e.qZA()(),e._UZ(23,"div",10),e.qZA()()),2&n){const r=e.MAs(10);e.xp6(4),e.hij(" D\xe9tails / Traitement de l'entr\xe9e N\xb0: ",i.entree.numeroCmd," "),e.xp6(2),e.Q6J("routerLink",e.DdM(7,tt)),e.xp6(3),e.Q6J("activeId",i.active),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavItem",3),e.xp6(4),e.Q6J("ngbNavOutlet",r)}},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.eFW,a.Yp0,a.iok,a.auY,d.uN,d.Pz,d.nv,d.Is,d.Fh,d.tO,d.Dy,a.wxo,S.o],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child){margin-left:.2rem!important}.nav-tabs[_ngcontent-%COMP%]{border-bottom:unset!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:500;background-color:#538136;border:2px solid #538136}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border:2px solid blue}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border:2px solid yellow}"]})}return o})(),it=(()=>{class o{constructor(t){this.activeModal=t}save(){this.activeModal.close(this.comment)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-rejeter-sortie"]],decls:22,vars:2,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"text-center"],["md","12"],["cLabel","","for","field_adresse"],["cFormControl","","id","field_observation","rows","3","name","comment",3,"ngModel","ngModelChange"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],["cButton","","color","warning","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Rejet d'une sortie"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"h5",8),e._uU(11),e.qZA(),e.TgZ(12,"c-row")(13,"c-col",9)(14,"label",10),e._uU(15,"Observation :"),e.qZA(),e.TgZ(16,"textarea",11),e.NdJ("ngModelChange",function(l){return i.comment=l}),e.qZA()()()(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){return i.save()}),e._uU(19,"Rejeter"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return i.close()}),e._uU(21,"Annuler"),e.qZA()()()()),2&n&&(e.xp6(11),e.hij("Etes-vous s\xfbr de vouloir rejeter a sortie N\xb0 ",i.numSortie," ?"),e.xp6(5),e.Q6J("ngModel",i.comment))},dependencies:[a.Hq3,a.oHf,a.eFW,a.Yp0,a.iok,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#538136}"]})}return o})(),ot=(()=>{class o{constructor(t){this.activeModal=t}save(){this.activeModal.close(this.format)}close(){this.activeModal.dismiss()}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(d.Kz))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-valider-sortie"]],decls:26,vars:4,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"text-center"],["md","12"],["cLabel","","for","field_adresse"],["aria-label","Small select example","cSelect","","sizing","sm","name","format","id","field_format",3,"ngModel","ngModelChange"],["selected","",3,"ngValue"],[3,"ngValue"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"],["cButton","","color","warning","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Validation d'une sortie"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"h5",8),e._uU(11),e.qZA(),e.TgZ(12,"c-row")(13,"c-col",9)(14,"label",10),e._uU(15,"Selectionner le format du bordereau de mise en consommation :"),e.qZA(),e.TgZ(16,"select",11),e.NdJ("ngModelChange",function(l){return i.format=l}),e.TgZ(17,"option",12),e._uU(18,"PDF"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"Word"),e.qZA()()()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return i.save()}),e._uU(23,"valider"),e.qZA(),e.TgZ(24,"button",16),e.NdJ("click",function(){return i.close()}),e._uU(25,"Annuler"),e.qZA()()()()),2&n&&(e.xp6(11),e.hij("Etes-vous s\xfbr de vouloir valider la sortie N\xb0 ",i.numSortie," ?"),e.xp6(5),e.Q6J("ngModel",i.format),e.xp6(1),e.Q6J("ngValue","pdf"),e.xp6(2),e.Q6J("ngValue","word"))},dependencies:[a.Hq3,a.eFW,a.nqR,a.Yp0,a.iok,c._Y,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.On,c.F],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#538136}"]})}return o})();function rt(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Observaton :"),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"textarea",18),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(4),e.Q6J("value",null==t.sortie?null:t.sortie.description)("readOnly",!0)}}function lt(o,s){if(1&o&&(e.TgZ(0,"c-row")(1,"c-col",11)(2,"c-row")(3,"c-col",12)(4,"fieldset",13)(5,"legend",14),e._uU(6,"G\xe9n\xe9ral"),e.qZA(),e.TgZ(7,"div",15)(8,"table",16)(9,"tbody")(10,"tr")(11,"th"),e._uU(12,"Date sortie"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()(),e.TgZ(15,"tr")(16,"th"),e._uU(17,"Motif de sortie"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA()(),e.TgZ(20,"tr")(21,"th"),e._uU(22,"Statut"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()(),e.YNc(25,rt,5,2,"tr",17),e.qZA()()()()(),e.TgZ(26,"c-col",12)(27,"fieldset",13)(28,"legend",14),e._uU(29,"Magasin"),e.qZA(),e.TgZ(30,"div",15)(31,"table",16)(32,"tbody")(33,"tr")(34,"th"),e._uU(35,"Dep\xf4t"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.qZA()(),e.TgZ(38,"tr")(39,"th"),e._uU(40,"Nom"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA()(),e.TgZ(43,"tr")(44,"th"),e._uU(45,"Capacit\xe9"),e.qZA(),e.TgZ(46,"td"),e._uU(47),e.qZA()()()()()()()()(),e.TgZ(48,"c-col",11)(49,"fieldset",13)(50,"legend",14),e._uU(51,"Ordonnateur"),e.qZA(),e.TgZ(52,"div",15)(53,"table",16)(54,"tbody")(55,"tr")(56,"th"),e._uU(57,"Fonction"),e.qZA(),e.TgZ(58,"td"),e._uU(59),e.qZA()(),e.TgZ(60,"tr")(61,"th"),e._uU(62,"Matricule"),e.qZA(),e.TgZ(63,"td"),e._uU(64),e.qZA()(),e.TgZ(65,"tr")(66,"th"),e._uU(67,"Titre honorifique"),e.qZA(),e.TgZ(68,"td"),e._uU(69),e.qZA()(),e.TgZ(70,"tr")(71,"th"),e._uU(72,"Grade militaire"),e.qZA(),e.TgZ(73,"td"),e._uU(74),e.qZA()(),e.TgZ(75,"tr")(76,"th"),e._uU(77,"Nom"),e.qZA(),e.TgZ(78,"td"),e._uU(79),e.qZA()(),e.TgZ(80,"tr")(81,"th"),e._uU(82,"Pr\xe9nom"),e.qZA(),e.TgZ(83,"td"),e._uU(84),e.qZA()(),e.TgZ(85,"tr")(86,"th"),e._uU(87,"N\xb0 de t\xe9l\xe9phone"),e.qZA(),e.TgZ(88,"td"),e._uU(89),e.qZA()(),e.TgZ(90,"tr")(91,"th"),e._uU(92,"Email"),e.qZA(),e.TgZ(93,"td"),e._uU(94),e.qZA()()()()()()(),e.TgZ(95,"c-col",11)(96,"fieldset",13)(97,"legend",14),e._uU(98,"Structure b\xe9n\xe9ficiaire"),e.qZA(),e.TgZ(99,"div",15)(100,"table",16)(101,"tbody")(102,"tr")(103,"th"),e._uU(104,"Sigle"),e.qZA(),e.TgZ(105,"td"),e._uU(106),e.qZA()(),e.TgZ(107,"tr")(108,"th"),e._uU(109,"Raison sociale"),e.qZA(),e.TgZ(110,"td"),e._uU(111),e.qZA()(),e.TgZ(112,"tr")(113,"th"),e._uU(114,"N\xb0 de t\xe9l\xe9phone mobile"),e.qZA(),e.TgZ(115,"td"),e._uU(116),e.qZA()(),e.TgZ(117,"tr")(118,"th"),e._uU(119,"N\xb0 de t\xe9l\xe9phone fixe"),e.qZA(),e.TgZ(120,"td"),e._uU(121),e.qZA()(),e.TgZ(122,"tr")(123,"th"),e._uU(124,"Email"),e.qZA(),e.TgZ(125,"td"),e._uU(126),e.qZA()()()()()()(),e.TgZ(127,"c-col",11)(128,"fieldset",13)(129,"legend",14),e._uU(130,"Repr\xe9sentant"),e.qZA(),e.TgZ(131,"div",15)(132,"table",16)(133,"tbody")(134,"tr")(135,"th"),e._uU(136,"Fonction"),e.qZA(),e.TgZ(137,"td"),e._uU(138),e.qZA()(),e.TgZ(139,"tr")(140,"th"),e._uU(141,"Matricule"),e.qZA(),e.TgZ(142,"td"),e._uU(143),e.qZA()(),e.TgZ(144,"tr")(145,"th"),e._uU(146,"Nom"),e.qZA(),e.TgZ(147,"td"),e._uU(148),e.qZA()(),e.TgZ(149,"tr")(150,"th"),e._uU(151,"Pr\xe9nom"),e.qZA(),e.TgZ(152,"td"),e._uU(153),e.qZA()(),e.TgZ(154,"tr")(155,"th"),e._uU(156,"N\xb0 de t\xe9l\xe9phone"),e.qZA(),e.TgZ(157,"td"),e._uU(158),e.qZA()(),e.TgZ(159,"tr")(160,"th"),e._uU(161,"Email"),e.qZA(),e.TgZ(162,"td"),e._uU(163),e.qZA()()()()()()()()),2&o){const t=e.oxw();e.xp6(14),e.Oqu(": "+t.sortie.dateSortie),e.xp6(5),e.Oqu(": "+t.getMotifSortieLabel(null==t.sortie?null:t.sortie.motifSortie)),e.xp6(5),e.Oqu(": "+t.getStatusLabel(null==t.sortie?null:t.sortie.status)),e.xp6(1),e.Q6J("ngIf",(null==t.sortie?null:t.sortie.status)==(null==t.referentials?null:t.referentials.mvtStatus[2].valeur)),e.xp6(12),e.Oqu(": "+(null==t.sortie||null==t.sortie.magasin||null==t.sortie.magasin.depot?null:t.sortie.magasin.depot.nomDepot)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.magasin?null:t.sortie.magasin.nomMagasin)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.magasin?null:t.sortie.magasin.capacite)),e.xp6(12),e.Oqu(": "+(null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.fonction)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.matricule)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.titreHonorifique)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.gradeMilitaire)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.nom)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.prenom)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.telephone)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.email)),e.xp6(12),e.Oqu(": "+(null==t.sortie.beneficiaire?null:t.sortie.beneficiaire.sigle)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.beneficiaire?null:t.sortie.beneficiaire.raisonSociale)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.beneficiaire?null:t.sortie.beneficiaire.telephoneMobile)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.beneficiaire?null:t.sortie.beneficiaire.telephoneFix)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.beneficiaire?null:t.sortie.beneficiaire.email)),e.xp6(12),e.Oqu(": "+(null==t.sortie.detenteur?null:t.sortie.detenteur.fonction)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.detenteur?null:t.sortie.detenteur.matricule)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.detenteur?null:t.sortie.detenteur.nom)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.detenteur?null:t.sortie.detenteur.prenom)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.detenteur?null:t.sortie.detenteur.telephone)),e.xp6(5),e.Oqu(": "+(null==t.sortie||null==t.sortie.ordonnateur?null:t.sortie.ordonnateur.email))}}function st(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()()()),2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu((null==t.medaille?null:t.medaille.nomComplet)+" | "+(null==t.medaille?null:t.medaille.code)+" | "+(null==t.medaille?null:t.medaille.stock)),e.xp6(3),e.Oqu(t.quantiteLigne)}}function at(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"table",20)(2,"thead",21)(3,"tr")(4,"th",22),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",22),e._uU(7,"M\xe9daille(D\xe9signation | Code | Sock disponible)"),e.qZA(),e.TgZ(8,"th",22),e._uU(9,"Quantit\xe9"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,st,10,3,"tr",23),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("striped",!0),e.xp6(10),e.Q6J("ngForOf",t.sortie.ligneSorties)}}function ct(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",24),e._uU(2,"Aucun de lignes associ\xe9es \xe0 cette sortie!"),e.qZA()())}function dt(o,s){if(1&o&&e.YNc(0,at,12,2,"div",19)(1,ct,3,0,"div",17),2&o){const t=e.oxw();e.Q6J("ngIf",(null==t.sortie?null:t.sortie.ligneSorties)&&(null==t.sortie?null:t.sortie.ligneSorties.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.sortie?null:t.sortie.ligneSorties)&&0==(null==t.sortie?null:t.sortie.ligneSorties.length))}}function ut(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.onPrevisualizePj(i))}),e._UZ(1,"i",28),e.qZA()}}function gt(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td")(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"td"),e.YNc(14,ut,2,0,"button",26),e.qZA()()),2&o){const t=s.$implicit,n=s.index;e.xp6(3),e.Oqu(n+1),e.xp6(3),e.Oqu(t.typePiece),e.xp6(3),e.Oqu(t.referencePiece),e.xp6(3),e.Oqu(t.lienPiece),e.xp6(2),e.Q6J("ngIf",t.fileBase64Content)}}function pt(o,s){if(1&o&&(e.TgZ(0,"div",15)(1,"table",20)(2,"thead")(3,"tr")(4,"th",22),e._uU(5,"N\xb0"),e.qZA(),e.TgZ(6,"th",22),e._uU(7,"Type pi\xe8ce"),e.qZA(),e.TgZ(8,"th",22),e._uU(9,"R\xe9f\xe9rence"),e.qZA(),e.TgZ(10,"th",22),e._uU(11,"Pi\xe8ce"),e.qZA(),e._UZ(12,"th",22),e.qZA()(),e.TgZ(13,"tbody"),e.YNc(14,gt,15,5,"tr",23),e.qZA()()()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("striped",!0),e.xp6(13),e.Q6J("ngForOf",t.pieceJointes)}}function _t(o,s){1&o&&(e.TgZ(0,"div")(1,"c-alert",24),e._uU(2,"Aucune pi\xe8ces jointes associ\xe9es \xe0 cette sortie!"),e.qZA()())}function mt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"button",31),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.rejeter(i.sortie))}),e._uU(2,"Rejeter la sortie"),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.valider(i.sortie))}),e._uU(4,"Valider la sortie"),e.qZA()()}}function ft(o,s){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,mt,5,0,"div",29),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.sortie.status!=t.referentials.mvtStatus[1].valeur)}}function ht(o,s){if(1&o&&(e.YNc(0,pt,15,2,"div",19)(1,_t,3,0,"div",17),e._UZ(2,"hr"),e.YNc(3,ft,2,1,"div",25)),2&o){const t=e.oxw();e.Q6J("ngIf",t.pieceJointes&&t.pieceJointes.length>0),e.xp6(1),e.Q6J("ngIf",t.pieceJointes&&0==t.pieceJointes.length),e.xp6(2),e.Q6J("appHasAnyAuthority",t.valide)}}const Zt=()=>["/mouvement/sortie"];let bt=(()=>{class o{constructor(t,n,i,r,l){this.sortieService=t,this.activatedRoute=n,this.router=i,this.referentialService=r,this.modalService=l,this.sortie=null,this.active=1,this.valide="VALIDE_MVT"}ngOnInit(){this.referentialService.query().subscribe({next:t=>{this.referentials=t.body||[],console.log("REFERENTIALS : ",this.referentials)},error:t=>console.log("ERROR : ",t)}),this.activatedRoute.data.subscribe(({sortie:t})=>{console.log("SORTIE RESOLVE : ",t.body),this.sortie=t.body,this.sortie.dateSortie=b(this.sortie?.dateSortie).format("DD/MM/yyyy")}),this.sortie&&this.sortie.idSortie&&this.getAllPjForSortie(this.sortie.idSortie)}getAllPjForSortie(t){this.referentialService.getAllPieceJointes(t,"sortie").subscribe({next:n=>{this.pieceJointes=n.body||[],console.log("PIECE_JOINTES_G ",this.pieceJointes)},error:n=>console.log("ERROR : ",n)})}onPrevisualizePj(t){for(var n=atob(t.fileBase64Content),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);let l=new Blob([i],{type:"application/pdf"});var g=URL.createObjectURL(l);window.open(g)}goBack(){this.router.navigate(["/mouvement/sortie"])}generateEtat(t,n){this.sortieService.generateEtat(t,n).subscribe({next:i=>{if(console.log(i),null!==i){const r=new Blob([i],{type:"application/pdf"}),l=URL.createObjectURL(r);window.open(l,"_blank")}},error:i=>{console.log(i)}})}valider(t){const n=this.modalService.open(ot,{size:"md",backdrop:"static"});n.componentInstance.numSortie=t.numeroSortie,n.result.then(i=>{this.sortieService.valider(t.idSortie).subscribe({next:r=>{if(r.body&&"msg"in r.body){const l=""+r.body.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}else this.generateEtat(t.idSortie,i),this.goBack()},error:r=>console.log("ERROR : ",r)})},i=>console.log(i))}rejeter(t){const n=this.modalService.open(it,{size:"md",backdrop:"static"});n.componentInstance.numSortie=t.numeroSortie,n.result.then(i=>{t.description=i,console.log("REJET : ",t),this.sortieService.rejeter(t.idSortie,i).subscribe({next:r=>{if(r.body&&"msg"in r.body){const l=""+r.body.msg;p().fire({icon:"error",title:"D\xe9sol\xe9!",text:l})}else this.goBack()},error:r=>console.log("ERROR : ",r)})},i=>console.log(i))}getStatusLabel(t){return this.referentials?this.referentials.mvtStatus.find(i=>i.valeur==t).libelle:""}getMotifSortieLabel(t){return this.referentials?this.referentials.motifsSortie.find(i=>i.valeur==t).libelle:""}static#e=this.\u0275fac=function(n){return new(n||o)(e.Y36(M.Y),e.Y36(_.gz),e.Y36(_.F0),e.Y36(h.G),e.Y36(d.FF))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-sortie-detail"]],decls:24,vars:8,consts:[[1,"mb-4"],[1,"text-white"],["md","10"],["md","2"],["cButton","","color","info","variant","outline","size","sm",1,"float-end",3,"routerLink"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],["md","6"],["md","12"],[1,"mb-3","p-2",2,"border","solid 1.5px","border-radius","3px"],["cLabel","col",1,"pt-0"],[1,"table-responsive"],[1,"table","table-sm","no-border"],[4,"ngIf"],["name","observation","id","field_observation","rows","2",1,"form-control",3,"value","readOnly"],["class","table-responsive",4,"ngIf"],["cTable","",3,"striped"],[2,"font-weight","bold"],["scope","col"],[4,"ngFor","ngForOf"],["color","warning"],[4,"appHasAnyAuthority"],["type","button","class","btn btn-outline-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fa","fa-eye"],["class","float-end",4,"ngIf"],[1,"float-end"],["cButton","","color","primary","variant","outline","size","sm",3,"click"],["cButton","","color","success","variant","outline","size","sm",1,"mx-2",3,"click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"c-card",0)(1,"c-card-header",1)(2,"c-row")(3,"c-col",2),e._uU(4),e.qZA(),e.TgZ(5,"c-col",3)(6,"button",4),e._uU(7,"Retour"),e.qZA()()()(),e.TgZ(8,"c-card-body")(9,"ul",5,6),e.NdJ("activeIdChange",function(l){return i.active=l}),e.TgZ(11,"li",7)(12,"button",8),e._uU(13,"Informations sur la sortie"),e.qZA(),e.YNc(14,lt,164,26,"ng-template",9),e.qZA(),e.TgZ(15,"li",7)(16,"button",8),e._uU(17,"Lignes de la sortie"),e.qZA(),e.YNc(18,dt,2,2,"ng-template",9),e.qZA(),e.TgZ(19,"li",7)(20,"button",8),e._uU(21,"Pi\xe8ces justificatives"),e.qZA(),e.YNc(22,ht,4,3,"ng-template",9),e.qZA()(),e._UZ(23,"div",10),e.qZA()()),2&n){const r=e.MAs(10);e.xp6(4),e.hij(" D\xe9tails / Traitement de la sortie N\xb0: ",i.sortie.numeroSortie," "),e.xp6(2),e.Q6J("routerLink",e.DdM(7,Zt)),e.xp6(3),e.Q6J("activeId",i.active),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(4),e.Q6J("ngbNavItem",3),e.xp6(4),e.Q6J("ngbNavOutlet",r)}},dependencies:[m.sg,m.O5,_.rH,a.Hq3,a.AkF,a.yue,a.nkx,a.eFW,a.Yp0,a.iok,a.auY,d.uN,d.Pz,d.nv,d.Is,d.Fh,d.tO,d.Dy,a.wxo,S.o],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:first-child){margin-left:.2rem!important}.nav-tabs[_ngcontent-%COMP%]{border-bottom:unset!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:500;background-color:#538136;border:2px solid #538136}.nav-tabs[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{border:2px solid blue}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border:2px solid yellow}"]})}return o})();var U=u(1542),L=u(2096);const At=[{path:"entree",component:X,canActivate:[U.P]},{path:"entree/nouvelle",component:F,canActivate:[U.P]},{path:"entree/:id/edit",component:F,canActivate:[U.P]},{path:"entree/:id/details",component:nt,canActivate:[U.P],resolve:{entree:o=>{const s=Number(o.paramMap.get("id"));return s?(0,e.f3M)(C.w).find(s):(0,L.of)(null)}}},{path:"sortie",component:ge},{path:"sortie/nouvelle",component:w},{path:"sortie/:id/edit",component:w},{path:"sortie/:id/details",component:bt,resolve:{sortie:o=>{const s=Number(o.paramMap.get("id"));return s?(0,e.f3M)(M.Y).find(s):(0,L.of)(null)}}}];let qt=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(At),_.Bz]})}return o})(),Et=(()=>{class o{static#e=this.\u0275fac=function(n){return new(n||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[m.ez,qt,a.hJ1,a.dTQ,a.ejP,a.zE6,a.U$I,A.QX,d.IJ,d.Oz,c.u5,a.nMh,q.JX,a.TXv]})}return o})()}}]);