"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[96],{6549:(b,g,l)=>{l.d(g,{V$:()=>t,gK:()=>p,nq:()=>d,wt:()=>u});const p=5,d=8,u="Suivant",t="Precedent"},8367:(b,g,l)=>{l.r(g),l.d(g,{UtilisateurModule:()=>P});var p=l(6814),d=l(2098),f=l(6549),h=l(3519),u=l.n(h),t=l(9212),_=l(7331),a=l(9969);function T(s,U){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"td")(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"td")(8,"span"),t._uU(9),t.qZA()(),t.TgZ(10,"td")(11,"span"),t._uU(12),t.qZA()(),t.TgZ(13,"td")(14,"span"),t._uU(15),t.qZA()(),t.TgZ(16,"td")(17,"span"),t._uU(18),t.qZA()(),t.TgZ(19,"td")(20,"span"),t._uU(21),t.qZA()(),t.TgZ(22,"td")(23,"div",7)(24,"button",8),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.goToEditPage(r))}),t._UZ(25,"i",9),t.qZA(),t.TgZ(26,"button",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.resetAccountTodefault(r))}),t._UZ(27,"i",11),t.qZA(),t.TgZ(28,"button",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.disableAccount(r))}),t._UZ(29,"i",13),t.qZA(),t.TgZ(30,"button",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,o=t.oxw();return t.KtG(o.removeUser(r))}),t._UZ(31,"i",15),t.qZA()()()()}if(2&s){const e=U.$implicit,i=U.index;t.xp6(3),t.Oqu(i+1),t.xp6(3),t.Oqu(e.login),t.xp6(3),t.Oqu(e.nom),t.xp6(3),t.Oqu(e.prenom),t.xp6(3),t.Oqu(e.matricule),t.xp6(3),t.Oqu(e.contact),t.xp6(3),t.Oqu(e.email),t.xp6(7),t.Q6J("disabled",!e.actif)}}let A=(()=>{class s{constructor(e,i){this.utilisateurService=e,this.router=i,this.utilisateurs=[],this.totalItems=0,this.itemsPerPage=f.gK,this.ngbPaginationPage=1}ngOnInit(){this.loadPage()}loadPage(e,i){const n=e||this.page||1;this.utilisateurService.query({page:n-1,size:this.itemsPerPage,sort:this.sort()}).subscribe({next:r=>{this.onSuccess(r.body,r.headers,n,!i)},error:()=>this.onError()})}handleNavigation(){this.loadPage()}sort(){const e=[this.predicate+","+(this.ascending?"asc":"desc")];return"id"!==this.predicate&&e.push("id"),e}onSuccess(e,i,n,r){this.totalItems=Number(i.get("X-Total-Count")),this.page=n,r&&this.router.navigate(["pages","securite","utilisateurs"],{queryParams:{page:this.page,size:this.itemsPerPage,sort:this.predicate+","+(this.ascending?"asc":"desc")}}),this.utilisateurs=e||[],this.ngbPaginationPage=this.page}onError(){this.ngbPaginationPage=this.page??1}goToUpdateCreate(){this.router.navigate(["pages","securite","utilisateurs","creation"])}removeUser(e){u().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(i=>{i.isConfirmed&&u().fire({title:"Supprim\xe9!",text:"Element supprim\xe9.",icon:"success"})})}resetAccountTodefault(e){u().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible et reinitialisera le mot de passe par admin2023!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, proc\xe9der!"}).then(i=>{i.isConfirmed&&this.reset(e)})}disableAccount(e){u().fire({title:"Etes-vous vraiment s\xfbr?",text:"L'utilisteur concern\xe9 ne pourra plus se connecter!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, proc\xe9der!"}).then(i=>{i.isConfirmed&&this.disable(e)})}goToEditPage(e){this.router.navigate(["pages","securite","utilisateurs","modification",e.id])}reset(e){console.warn("LOGIN",e.login),this.utilisateurService.requestPasswordReset(e.login).subscribe(i=>{u().fire({title:"",text:i.body.msg,icon:"success"}),this.loadPage()})}disable(e){this.utilisateurService.disableAccount(e.login).subscribe(i=>{u().fire({title:"",text:i.body.msg,icon:"success"}),this.loadPage()})}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(_.y),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-utilisateurs"]],decls:30,vars:2,consts:[[1,"mb-4"],["md","10"],["md","2"],["cButton","","color","primary","variant","outline",1,"float-end","btn-sm",3,"click"],["cTable","",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,""],["title","Modifier l'utilisateur",1,"",3,"click"],["aria-hidden","true",1,"fa","fa","fa-pencil",2,"color","orange","margin-right","12px"],["title","Activer le compte et initialiser le mot de passe",1,"",3,"click"],["aria-hidden","true",1,"fa","fa-key",2,"color","green","margin-right","12px"],["title","Desactiver le compte",1,"",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-lock",2,"color","green","margin-right","12px"],["title","Supprimer l'utilisateur",3,"click"],["aria-hidden","true",1,"fa","fa-remove",2,"color","orangered"]],template:function(i,n){1&i&&(t.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),t._uU(4," Utilisateurs "),t.qZA(),t.TgZ(5,"c-col",2)(6,"button",3),t.NdJ("click",function(){return n.goToUpdateCreate()}),t._uU(7,"Ajouter"),t.qZA()()()(),t.TgZ(8,"c-card-body")(9,"table",4)(10,"thead")(11,"tr")(12,"th",5),t._uU(13,"#"),t.qZA(),t.TgZ(14,"th",5),t._uU(15,"Login"),t.qZA(),t.TgZ(16,"th",5),t._uU(17,"Nom"),t.qZA(),t.TgZ(18,"th",5),t._uU(19,"prenom"),t.qZA(),t.TgZ(20,"th",5),t._uU(21,"Matricule"),t.qZA(),t.TgZ(22,"th",5),t._uU(23,"N\xb0 de t\xe9l\xe9phone mobile"),t.qZA(),t.TgZ(24,"th",5),t._uU(25,"Email"),t.qZA(),t.TgZ(26,"th",5),t._uU(27,"Action"),t.qZA()()(),t.TgZ(28,"tbody"),t.YNc(29,T,32,8,"tr",6),t.qZA()()()()),2&i&&(t.xp6(9),t.Q6J("striped",!0),t.xp6(20),t.Q6J("ngForOf",n.utilisateurs))},dependencies:[p.sg,a.Hq3,a.yue,a.AkF,a.nkx,a.Yp0,a.iok,a.auY],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return s})();var v=l(5655),M=l(2012),c=l(95),C=l(332);let Z=(()=>{class s{constructor(e,i,n){this.profilService=e,this.utilisateurService=i,this.route=n,this.profils=[],this.profilsSelected=[],this.utilisateur=new v.V}ngOnInit(){const e=+this.route.snapshot.paramMap.get("id");e&&this.findUserById(e),this.utilisateur.id&&(this.profilsSelected=this.utilisateur.profils),this.loadAllProfils()}goBack(){window.history.back()}loadAllProfils(){this.profilService.query().subscribe({next:e=>{e&&e.body&&(this.profils=e.body||[])}})}saveOrUpdate(){this.utilisateur.profils=this.profilsSelected,this.utilisateur.id?this.utilisateurService.updateWithProfils(this.utilisateur).subscribe({next:()=>{u().fire({position:"center",icon:"success",title:"Modification effectu\xe9e avec succ\xe8s",showConfirmButton:!1,timer:1500}),window.history.back()},error:e=>{console.error("error"+JSON.stringify(e)),u().fire({position:"center",icon:"warning",title:"Une erreur est survenue lors de la modification",showConfirmButton:!1,timer:1500})}}):this.utilisateurService.create(this.utilisateur).subscribe({next:()=>{u().fire({position:"center",icon:"success",title:"Enregistrement effectu\xe9 avec succ\xe8s",showConfirmButton:!1,timer:1500}),window.history.back()},error:e=>{console.error("error"+JSON.stringify(e)),u().fire({position:"center",icon:"warning",title:"Une erreur est survenue lors de l'ajout",showConfirmButton:!1,timer:1500})}})}findUserById(e){this.utilisateurService.find(e).subscribe({next:i=>{i.body&&(this.utilisateur=i.body)}})}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(M.z),t.Y36(_.y),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-create-update-utilisateur"]],decls:53,vars:11,consts:[[1,"mb-4"],["md","10"],["md","2"],["cButton","","color","primary","variant","outline",1,"float-end","btn-sm",3,"click"],["formUser","ngForm"],[1,"row"],[1,"form-group","col-md-4"],["for","nom"],["type","text","id","nom","name","nom","aria-describedby","emailHelp",1,"form-control",3,"ngModel","ngModelChange"],["for","prenom"],["type","text","name","prenom","id","prenom","aria-describedby","prenom",1,"form-control",3,"ngModel","ngModelChange"],["for","matricule"],["type","text","name","matricule","id","matricule",1,"form-control",3,"ngModel","ngModelChange"],["for","fonction"],["type","text","name","fonction","id","fonction",1,"form-control",3,"ngModel","ngModelChange"],["for","titreHonorifique"],["type","text","name","titreHonorifique","id","titreHonorifique",1,"form-control",3,"ngModel","ngModelChange"],["for","contact"],["type","text","id","contact","name","contact",1,"form-control",3,"ngModel","ngModelChange"],["for","login"],["type","text","id","login","name","login",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","name","email","id","email",1,"form-control",3,"ngModel","ngModelChange"],["for","profils"],["bindLabel","libelle","bindValue","libelle","id","profils","name","privilege",3,"items","multiple","ngModel","ngModelChange"],[1,"text-end"],["type","reset",1,"btn","btn-warning"],[1,"btn","btn-success","m-lg-2",3,"click"]],template:function(i,n){1&i&&(t.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),t._uU(4," Cr\xe9ation utilisateur "),t.qZA(),t.TgZ(5,"c-col",2)(6,"button",3),t.NdJ("click",function(){return n.goBack()}),t._uU(7,"Retour"),t.qZA()()()(),t.TgZ(8,"c-card-body")(9,"form",null,4)(11,"div",5)(12,"div",6)(13,"label",7),t._uU(14,"Nom"),t.qZA(),t.TgZ(15,"input",8),t.NdJ("ngModelChange",function(o){return n.utilisateur.nom=o}),t.qZA()(),t.TgZ(16,"div",6)(17,"label",9),t._uU(18,"Pr\xe9nom"),t.qZA(),t.TgZ(19,"input",10),t.NdJ("ngModelChange",function(o){return n.utilisateur.prenom=o}),t.qZA()(),t.TgZ(20,"div",6)(21,"label",11),t._uU(22,"Matricule"),t.qZA(),t.TgZ(23,"input",12),t.NdJ("ngModelChange",function(o){return n.utilisateur.matricule=o}),t.qZA()(),t.TgZ(24,"div",6)(25,"label",13),t._uU(26,"Fonction"),t.qZA(),t.TgZ(27,"input",14),t.NdJ("ngModelChange",function(o){return n.utilisateur.fonction=o}),t.qZA()(),t.TgZ(28,"div",6)(29,"label",15),t._uU(30,"Titre Honorifique"),t.qZA(),t.TgZ(31,"input",16),t.NdJ("ngModelChange",function(o){return n.utilisateur.titreHonorifique=o}),t.qZA()(),t.TgZ(32,"div",6)(33,"label",17),t._uU(34,"Contact"),t.qZA(),t.TgZ(35,"input",18),t.NdJ("ngModelChange",function(o){return n.utilisateur.contact=o}),t.qZA()(),t.TgZ(36,"div",6)(37,"label",19),t._uU(38,"Login"),t.qZA(),t.TgZ(39,"input",20),t.NdJ("ngModelChange",function(o){return n.utilisateur.login=o}),t.qZA()(),t.TgZ(40,"div",6)(41,"label",21),t._uU(42,"Email"),t.qZA(),t.TgZ(43,"input",22),t.NdJ("ngModelChange",function(o){return n.utilisateur.email=o}),t.qZA()(),t.TgZ(44,"div",6)(45,"label",23),t._uU(46,"Profil"),t.qZA(),t.TgZ(47,"ng-select",24),t.NdJ("ngModelChange",function(o){return n.profilsSelected=o}),t.qZA()()(),t.TgZ(48,"div",25)(49,"button",26),t._uU(50,"Annuler"),t.qZA(),t.TgZ(51,"button",27),t.NdJ("click",function(){return n.saveOrUpdate()}),t._uU(52,"Enregistrer"),t.qZA()()()()()),2&i&&(t.xp6(15),t.Q6J("ngModel",n.utilisateur.nom),t.xp6(4),t.Q6J("ngModel",n.utilisateur.prenom),t.xp6(4),t.Q6J("ngModel",n.utilisateur.matricule),t.xp6(4),t.Q6J("ngModel",n.utilisateur.fonction),t.xp6(4),t.Q6J("ngModel",n.utilisateur.titreHonorifique),t.xp6(4),t.Q6J("ngModel",n.utilisateur.contact),t.xp6(4),t.Q6J("ngModel",n.utilisateur.login),t.xp6(4),t.Q6J("ngModel",n.utilisateur.email),t.xp6(4),t.Q6J("items",n.profils)("multiple",!0)("ngModel",n.profilsSelected))},dependencies:[a.Hq3,a.yue,a.AkF,a.nkx,a.Yp0,a.iok,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,C.w9]})}return s})();var m=l(1542);const y=[{path:"",component:A,canActivate:[m.P],data:{roles:["ADD_USER","VIEW_USER"]}},{path:"creation",component:Z,canActivate:[m.P],data:{roles:["ADD_USER","VIEW_USER"]}},{path:"modification/:id",component:Z,canActivate:[m.P],data:{roles:["ADD_USER","VIEW_USER"]}}];let q=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(y),d.Bz]})}return s})(),P=(()=>{class s{static#t=this.\u0275fac=function(i){return new(i||s)};static#e=this.\u0275mod=t.oAB({type:s});static#i=this.\u0275inj=t.cJS({imports:[p.ez,q,a.yue,a.AkF,a.nkx,a.Yp0,a.iok,c.u5,C.A0]})}return s})()}}]);