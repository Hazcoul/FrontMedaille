"use strict";(self.webpackChunkcoreui_free_angular_admin_template=self.webpackChunkcoreui_free_angular_admin_template||[]).push([[234],{6549:(A,f,l)=>{l.d(f,{V$:()=>m,gK:()=>u,nq:()=>g,wt:()=>d});const u=5,g=8,d="Suivant",m="Precedent"},234:(A,f,l)=>{l.r(f),l.d(f,{ProfileModule:()=>q});var u=l(6814),g=l(2098),v=l(6549),_=l(3519),d=l.n(_),m=l(3250);class b{constructor(p,t,i,o,r){this.id=p,this.code=t,this.libelle=i,this.description=o,this.privilegeCollection=r}}var e=l(9212),h=l(461),U=l(8879),C=l(2012),s=l(9969),c=l(95),Z=l(332);let P=(()=>{class n{constructor(t,i,o){this.activeModal=t,this.privilegeService=i,this.profilService=o,this.profil=new b,this.privileges=[],this.privilegesSelected=[]}ngOnInit(){this.profil.id&&(this.privilegesSelected=this.profil.privilegeCollection),this.loadAllPrivilege()}saveOrUpdate(){this.profil.privilegeCollection=this.privilegesSelected,console.warn("PROFIL TO SAVE",this.profil),this.profil.id?this.profilService.update(this.profil).subscribe({next:()=>{d().fire({position:"center",icon:"success",title:"Modification effectu\xe9e avec succ\xe8s",showConfirmButton:!1,timer:1500}),this.activeModal.close(!0)},error:t=>{console.error("error"+JSON.stringify(t)),d().fire({position:"center",icon:"warning",title:"Une erreur est survenue",showConfirmButton:!1,timer:1500})}}):this.profilService.create(this.profil).subscribe({next:()=>{d().fire({position:"center",icon:"success",title:"Enregistre effectu\xe9e avec succ\xe8s lors de l'ajout",showConfirmButton:!1,timer:1500}),this.activeModal.close(!0)},error:t=>{console.error("error"+JSON.stringify(t)),d().fire({position:"center",icon:"warning",title:"Une erreur est survenue lors de la modification",showConfirmButton:!1,timer:1500})}})}close(){console.log("close"),this.activeModal.dismiss()}loadAllPrivilege(){this.privilegeService.query().subscribe({next:t=>{t&&t.body&&(this.privileges=t.body||[])}})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(h.Kz),e.Y36(U.x),e.Y36(C.z))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-update-profil"]],decls:27,vars:5,consts:[[1,"card"],[1,"modal-header","text-white"],[1,"modal-tile"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],["md","6"],["cLabel","","for","field_sigle"],["cFormControl","","sizing","sm","id","field_sigle","type","text","name","sigle",3,"ngModel","ngModelChange"],["cLabel","","for","field_raisonSociale"],["cFormControl","","sizing","sm","id","field_raisonSociale","type","text","name","raisonSociale",3,"ngModel","ngModelChange"],[1,"mt-2"],["md","12"],["bindLabel","libelle","name","privilege",3,"items","multiple","ngModel","ngModelChange"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"Ajouter/modifier un profil"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.close()}),e.TgZ(5,"span",4),e._uU(6,"X"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"c-row")(11,"c-col",8)(12,"label",9),e._uU(13,"Code :"),e.qZA(),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(a){return o.profil.code=a}),e.qZA()(),e.TgZ(15,"c-col",8)(16,"label",11),e._uU(17,"Libelle :"),e.qZA(),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(a){return o.profil.libelle=a}),e.qZA()()(),e.TgZ(19,"c-row",13)(20,"c-col",14)(21,"label",11),e._uU(22,"privil\xe8ges :"),e.qZA(),e.TgZ(23,"ng-select",15),e.NdJ("ngModelChange",function(a){return o.privilegesSelected=a}),e.qZA()()()(),e.TgZ(24,"div",16)(25,"button",17),e.NdJ("click",function(){return o.saveOrUpdate()}),e._uU(26,"Enregistrer "),e.qZA()()()()),2&i&&(e.xp6(14),e.Q6J("ngModel",o.profil.code),e.xp6(4),e.Q6J("ngModel",o.profil.libelle),e.xp6(5),e.Q6J("items",o.privileges)("multiple",!0)("ngModel",o.privilegesSelected))},dependencies:[s.Hq3,s.Yp0,s.iok,s.oHf,s.eFW,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,Z.w9]})}return n})();function M(n,p){if(1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Libelle"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&n){const t=p.$implicit;e.xp6(4),e.hij(": ",t.code,""),e.xp6(4),e.hij(": ",t.libelle,"")}}let x=(()=>{class n{constructor(t){this.activeModal=t,this.profil=new b}ngOnInit(){}close(){console.log("close"),this.activeModal.dismiss()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(h.Kz))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-detail-profil"]],decls:37,vars:3,consts:[[1,"card"],[1,"modal-header","bg-success","text-white"],[1,"text-center"],["cButton","","aria-label","Close",1,"close","btn-outline-danger","bg-danger",2,"color","white",3,"click"],["aria-hidden","true"],["name","addEditForm","role","form","novalidate",""],["addEditForm","ngForm"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"text-info","mb-2"],[1,"table-responsive"],[1,"table","table-sm","no-border"],[1,"text-info","mt-4"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["cButton","","color","success","variant","outline","size","sm",1,"float-end",3,"click"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"D\xe9tail de profil"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.close()}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"form",5,6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"span",10),e._uU(13,"Information du profil"),e.qZA(),e.TgZ(14,"div",11)(15,"table",12)(16,"tbody")(17,"tr")(18,"th"),e._uU(19,"Libelle"),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Description"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA()()()()()()(),e.TgZ(26,"div",8)(27,"div",9)(28,"span",13),e._uU(29,"Liste des privil\xe8ges"),e.qZA(),e.TgZ(30,"div",11)(31,"table",12)(32,"tbody"),e.YNc(33,M,9,2,"tr",14),e.qZA()()()()()(),e.TgZ(34,"div",15)(35,"button",16),e.NdJ("click",function(){return o.close()}),e._uU(36,"Fermer "),e.qZA()()()()),2&i&&(e.xp6(21),e.hij(": ",o.profil.code,""),e.xp6(4),e.hij(": ",o.profil.libelle,""),e.xp6(8),e.Q6J("ngForOf",o.profil.privilegeCollection))},dependencies:[u.sg,s.Hq3,c._Y,c.JL,c.F],styles:[".text-on-pannel[_ngcontent-%COMP%]{background:#fff none repeat scroll 0 0;height:auto;margin-left:20px;padding:3px 5px;position:absolute;margin-top:-47px;border:1px solid #337ab7;border-radius:8px}.panel[_ngcontent-%COMP%]{margin-top:27px!important}.panel-body[_ngcontent-%COMP%]{padding-top:30px!important}"]})}return n})();var y=l(1272);function S(n,p){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"td",7)(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"td",8)(8,"span"),e._uU(9),e.qZA()(),e.TgZ(10,"td",9)(11,"button",10),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openAddEditModal(r))}),e.O4$(),e._UZ(12,"svg",11),e.qZA(),e.kcU(),e.TgZ(13,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.openModalDetail(r))}),e._UZ(14,"i",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeProfil(r))}),e._UZ(16,"i",15),e.qZA()()()}if(2&n){const t=p.$implicit,i=p.index;e.xp6(3),e.Oqu(i+1),e.xp6(3),e.Oqu(t.code),e.xp6(3),e.Oqu(t.libelle)}}let E=(()=>{class n{constructor(t,i,o){this.profilService=t,this.router=i,this.modalService=o,this.profils=[],this.totalItems=0,this.itemsPerPage=v.gK,this.ngbPaginationPage=1}ngOnInit(){this.loadPage()}loadPage(t,i){const o=t||this.page||1;this.profilService.query({page:o-1,size:this.itemsPerPage,sort:this.sort()}).subscribe({next:r=>{this.onSuccess(r.body,r.headers,o,!i)},error:()=>this.onError()})}handleNavigation(){this.loadPage()}sort(){const t=[this.predicate+","+(this.ascending?"asc":"desc")];return"id"!==this.predicate&&t.push("id"),t}onSuccess(t,i,o,r){this.totalItems=Number(i.get("X-Total-Count")),this.page=o,r&&this.router.navigate(["pages","securite","profils"],{queryParams:{page:this.page,size:this.itemsPerPage,sort:this.predicate+","+(this.ascending?"asc":"desc")}}),this.profils=t||[],this.ngbPaginationPage=this.page}onError(){this.ngbPaginationPage=this.page??1}goToUpdateCreate(){this.router.navigate(["pages","securite","profils","creation"])}removeUser(t){d().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(i=>{i.isConfirmed&&d().fire({title:"Supprim\xe9!",text:"Element supprim\xe9.",icon:"success"})})}openAddEditModal(t){const i=this.modalService.open(P,{size:"lg",backdrop:"static"});null!=t?.id&&(i.componentInstance.profil=(0,m.Z)(t)),i.result.then(()=>{this.loadPage()},o=>{console.log(o)})}openModalDetail(t){const i=this.modalService.open(x,{size:"lg",backdrop:"static"});null!=t?.id&&(i.componentInstance.profil=(0,m.Z)(t)),i.result.then(()=>{this.loadPage()},o=>{console.log(o)})}removeProfil(t){d().fire({title:"Etes-vous vraiment s\xfbr?",text:"Cette action est irr\xe9versible!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Oui, supprimer!"}).then(i=>{i.isConfirmed&&this.delete(t)})}delete(t){this.profilService.delete(t.id).subscribe(()=>{this.loadPage(),d().fire({position:"center",icon:"success",title:"Suppression effectu\xe9e avec succ\xe8s",showConfirmButton:!1,timer:1500})},i=>{console.error("profil "+JSON.stringify(i))})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(C.z),e.Y36(g.F0),e.Y36(h.FF))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-profils"]],decls:22,vars:2,consts:[[1,"mb-4"],["md","10"],["md","2"],["cButton","","color","primary","variant","outline",1,"float-end","btn-sm",3,"click"],["cTable","",3,"striped"],["scope","col"],[4,"ngFor","ngForOf"],["width","10%"],["width","70%"],["width","20%"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["cIcon","","name","cilPen","size","sm"],["type","button",1,"btn","btn-outline-info","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-eye"],["type","button",1,"btn","btn-outline-danger","btn-sm",2,"margin-left","2px",3,"click"],[1,"fa","fa-remove"]],template:function(i,o){1&i&&(e.TgZ(0,"c-card",0)(1,"c-card-header")(2,"c-row")(3,"c-col",1),e._uU(4," Profils "),e.qZA(),e.TgZ(5,"c-col",2)(6,"button",3),e.NdJ("click",function(){return o.openAddEditModal()}),e._uU(7,"Ajouter"),e.qZA()()()(),e.TgZ(8,"c-card-body")(9,"table",4)(10,"thead")(11,"tr")(12,"th",5),e._uU(13,"#"),e.qZA(),e.TgZ(14,"th",5),e._uU(15,"Code"),e.qZA(),e.TgZ(16,"th",5),e._uU(17,"libelle"),e.qZA(),e.TgZ(18,"th",5),e._uU(19,"Action"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,S,17,3,"tr",6),e.qZA()()()()),2&i&&(e.xp6(9),e.Q6J("striped",!0),e.xp6(12),e.Q6J("ngForOf",o.profils))},dependencies:[u.sg,s.Hq3,s.yue,s.AkF,s.nkx,s.Yp0,s.iok,s.auY,y.ar],styles:["c-card-header[_ngcontent-%COMP%]{background-color:#538136}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase;font-size:large}c-card-header[_ngcontent-%COMP%]   c-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#538136;font-weight:700}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#538136}"]})}return n})();var T=l(1542);const O=[{path:"",component:E,canActivate:[T.P],data:{roles:["ADD_USER","VIEW_USER"]}},{path:"creation",component:P,canActivate:[T.P],data:{roles:["ADD_USER","VIEW_USER"]}}];let F=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(O),g.Bz]})}return n})(),q=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#i=this.\u0275inj=e.cJS({imports:[u.ez,F,s.yue,s.AkF,s.nkx,s.Yp0,s.iok,c.u5,c.UX,Z.A0]})}return n})()}}]);